
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>React 原码 · React Training</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="marion.lau@foxmail.com">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-page-copyright/footer.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../assets/style.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="cross-domin.md" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    前言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    第一单元 开发环境与工具封装
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../unit1/operatingEnvironment.html">
            
                <a href="../unit1/operatingEnvironment.html">
            
                    
                    第一课 开发环境配置
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../unit1/powershell.html">
            
                <a href="../unit1/powershell.html">
            
                    
                    附录 1 Windows 下安装 PowerShell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../unit1/iterm.html">
            
                <a href="../unit1/iterm.html">
            
                    
                    附录 2 OSX 下安装 Iterm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="../unit1/vscode.html">
            
                <a href="../unit1/vscode.html">
            
                    
                    附录 3 vscode 常用插件与使用
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../unit1/webpack.html">
            
                <a href="../unit1/webpack.html">
            
                    
                    第二课 什么是 Webpack
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../unit1/modular.html">
            
                <a href="../unit1/modular.html">
            
                    
                    附录 1 什么是模块化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="../unit1/npm.html">
            
                <a href="../unit1/npm.html">
            
                    
                    附录 2 使用 Npm 管理项目依赖
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="../unit1/optimize.html">
            
                <a href="../unit1/optimize.html">
            
                    
                    附录 3 使用 Webpack 优化项目
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../unit1/customizeCra.html">
            
                <a href="../unit1/customizeCra.html">
            
                    
                    第三课 CRA 与 Customize-cra
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../unit1/craco.html">
            
                <a href="../unit1/craco.html">
            
                    
                    附录 1 Craco 配置文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="../unit1/vite.html">
            
                <a href="../unit1/vite.html">
            
                    
                    附录 2 Vite 配置文件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../unit1/git.html">
            
                <a href="../unit1/git.html">
            
                    
                    第四课 什么是 Git
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="../unit1/gitFlow.html">
            
                <a href="../unit1/gitFlow.html">
            
                    
                    附录 1 Git 工作流
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="../unit1/gitQuery.html">
            
                <a href="../unit1/gitQuery.html">
            
                    
                    附录 2 Git 常见问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="../unit1/gitCommand.html">
            
                <a href="../unit1/gitCommand.html">
            
                    
                    附录 3 Git 命令集
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../unit1/codingStandard.html">
            
                <a href="../unit1/codingStandard.html">
            
                    
                    第五课 代码规范
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" data-path="../unit1/eslint.html">
            
                <a href="../unit1/eslint.html">
            
                    
                    附录 1 ESLint
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../unit1/utilsPackage.html">
            
                <a href="../unit1/utilsPackage.html">
            
                    
                    第六课 小工具封装
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.6.1" data-path="../unit1/th.md">
            
                <span>
            
                    
                    附录 1 完整的防抖
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.2" data-path="../unit1/storageManage.html">
            
                <a href="../unit1/storageManage.html">
            
                    
                    附录 2 Storage 管理工具
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../unit1/axiosPackage.html">
            
                <a href="../unit1/axiosPackage.html">
            
                    
                    第七课 封装 Axios
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.7.1" data-path="../unit1/fetch.html">
            
                <a href="../unit1/fetch.html">
            
                    
                    附录 1 Fetch 原码解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7.2" data-path="../unit1/axios.html">
            
                <a href="../unit1/axios.html">
            
                    
                    附录 2 Axios 原码解析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    第二单元 React 基础与关联知识
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../unit2/jsx.html">
            
                <a href="../unit2/jsx.html">
            
                    
                    第一课 JSX 与虚拟 DOM
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../unit2/soundStructure.html">
            
                <a href="../unit2/soundStructure.html">
            
                    
                    附录 1 react 源码结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../unit2/flex.html">
            
                <a href="../unit2/flex.html">
            
                    
                    附录 2 flex 布局
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="../unit2/diff.html">
            
                <a href="../unit2/diff.html">
            
                    
                    附录 3 DIFF 与 FIBER
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../unit2/component.html">
            
                <a href="../unit2/component.html">
            
                    
                    第二课 组件与状态
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../unit2/login.code.html">
            
                <a href="../unit2/login.code.html">
            
                    
                    附件 创建登录页 UI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../unit2/useContext.html">
            
                <a href="../unit2/useContext.html">
            
                    
                    附录 1 使用 Context 实现跨级组件通讯
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../unit2/setState.html">
            
                <a href="../unit2/setState.html">
            
                    
                    附录 2 react setState 任务队列详解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.4" data-path="../unit2/antd.form.html">
            
                <a href="../unit2/antd.form.html">
            
                    
                    附录 3 antd form 表单组件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../unit2/lifeCycle.html">
            
                <a href="../unit2/lifeCycle.html">
            
                    
                    第三课 生命周期与组件优化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../unit2/login.fun.html">
            
                <a href="../unit2/login.fun.html">
            
                    
                    附件 完成登录页功能
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="../unit2/componentOptimize.html">
            
                <a href="../unit2/componentOptimize.html">
            
                    
                    附录 2 组件的优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.3" data-path="../unit2/regexp.html">
            
                <a href="../unit2/regexp.html">
            
                    
                    附录 3 JS 正则表达式
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../unit2/reactRouter.html">
            
                <a href="../unit2/reactRouter.html">
            
                    
                    第四课 路由与嵌套路由
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="../unit2/container.html">
            
                <a href="../unit2/container.html">
            
                    
                    附录 1 创建全局框架
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.2" data-path="../unit2/communication.html">
            
                <a href="../unit2/communication.html">
            
                    
                    附录 2 组件通信
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.3" data-path="../unit2/omicron.html">
            
                <a href="../unit2/omicron.html">
            
                    
                    附录 3 算法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.4" data-path="../unit_02/sortAlgorithm.html">
            
                <a href="../unit_02/sortAlgorithm.html">
            
                    
                    附录 4 十大经典排序算法
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../unit2/redux.html">
            
                <a href="../unit2/redux.html">
            
                    
                    第五课 全局状态管理
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../unit2/middleware.html">
            
                <a href="../unit2/middleware.html">
            
                    
                    附录 1 常用中间件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.2" data-path="../unit2/devtools.html">
            
                <a href="../unit2/devtools.html">
            
                    
                    附录 2 调试工具与状态持久化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.3" data-path="../unit2/reduxToolkit.html">
            
                <a href="../unit2/reduxToolkit.html">
            
                    
                    附录 3 redux-toolkit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.4" data-path="../unit2/container.fun.md">
            
                <span>
            
                    
                    附录 4 完善全局框架
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../unit2/route_auth.html">
            
                <a href="../unit2/route_auth.html">
            
                    
                    第六课 路由守卫
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.1" data-path="../unit1/globalRoutes.html">
            
                <a href="../unit1/globalRoutes.html">
            
                    
                    附录 1 配置全站路由
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.2" data-path="../unit1/guard.md">
            
                <span>
            
                    
                    附录 2 路由表与用户权限管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.3" data-path="../unit2/hoc.html">
            
                <a href="../unit2/hoc.html">
            
                    
                    附录 3 高阶组件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../unit2/hooks.html">
            
                <a href="../unit2/hooks.html">
            
                    
                    第七课 hooks
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.7.1" data-path="../unit2/commodityManagement.md">
            
                <span>
            
                    
                    附录 1 创建商品管理页
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7.2" data-path="../unit2/hooksOptimize.md">
            
                <span>
            
                    
                    附录 2 hooks 组件的优化
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../unit2/moreHook.html">
            
                <a href="../unit2/moreHook.html">
            
                    
                    第八课 更多的 hooks
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.8.1" data-path="../unit2/hooksRedux.md">
            
                <span>
            
                    
                    附录 1 实现全局状态管理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="../unit2/customHook.html">
            
                <a href="../unit2/customHook.html">
            
                    
                    第九课 自定义 hooks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    第三单元 ECMAScript 基础知识
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../unit6/lessons_01.html">
            
                <a href="../unit6/lessons_01.html">
            
                    
                    第一课 JavaScript 常用 API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../unit6/lessons_03.html">
            
                <a href="../unit6/lessons_03.html">
            
                    
                    第二课 promise 与 async/await
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../unit6/lessons_07.html">
            
                <a href="../unit6/lessons_07.html">
            
                    
                    第三课 原型与原型链以及继承
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../unit6/lessons_09.html">
            
                <a href="../unit6/lessons_09.html">
            
                    
                    第四课 JS 事件循环
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../unit6/lessons_04.html">
            
                <a href="../unit6/lessons_04.html">
            
                    
                    第五课 Set/Map
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../unit6/lessons_05.html">
            
                <a href="../unit6/lessons_05.html">
            
                    
                    第六课 Reflect/Proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../unit6/lessons_02.html">
            
                <a href="../unit6/lessons_02.html">
            
                    
                    第七课 函数式编程的一些小知识
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../unit6/lessons_06.html">
            
                <a href="../unit6/lessons_06.html">
            
                    
                    第八课 ES 笔试题实现
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.8.1" data-path="../unit3/arrayToTree.md">
            
                <span>
            
                    
                    附录 1 扁平数据结构转树结构
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    第四单元 TypeScript 基础知识
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../unit9/lessons_01.html">
            
                <a href="../unit9/lessons_01.html">
            
                    
                    第一课 TypeScript 基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../unit9/lessons_02.html">
            
                <a href="../unit9/lessons_02.html">
            
                    
                    第二课 TypeScript 入门
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" >
            
                <span>
            
                    
                    第三课 TypeScript 泛型详解
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../unit9/lessons_03.html">
            
                <a href="../unit9/lessons_03.html">
            
                    
                    第三课 TypeScript 与类组件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../unit9/lessons_04.html">
            
                <a href="../unit9/lessons_04.html">
            
                    
                    第四课 TypeScript 与函数组件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    第五单元 UMI 基于 React 的 MVC 框架
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    第六单元 React-Native
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                    第七单元 了解一些 VUE
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <span>
            
                    
                    第八单元 uniapp 与小程序
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                    第九单元 NODEJS
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" >
            
                <span>
            
                    
                    第十单元 架构入门
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                    第十一单元 常见面试问题
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../unit_10/micro_frontend.md">
            
                <span>
            
                    
                    第一课 什么是微前端
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../unit_10/single_sign_on.md">
            
                <span>
            
                    
                    第二课 单点登陆
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../unit_10/websocket.md">
            
                <span>
            
                    
                    第三课 websocket
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../unit_10/cross_domain.md">
            
                <span>
            
                    
                    第四课 跨域问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="../unit_10/use_mock.md">
            
                <span>
            
                    
                    第五课 mock 的配置与使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="../unit_10/server_side_render.md">
            
                <span>
            
                    
                    第六课 什么是 ssr
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.7" data-path="../unit_10/npm_publish.md">
            
                <span>
            
                    
                    第七课 发布你的 npm 插件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" >
            
                <span>
            
                    
                    第十二单元 业务中常见的代码积累
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../unit_10/lessons_02.md">
            
                <span>
            
                    
                    lessons_02. 第三方登陆
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../unit_10/lessons_03.md">
            
                <span>
            
                    
                    lessons_03. 微信支付
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="../unit_10/lessons_03.md">
            
                <span>
            
                    
                    lessons_04. 微信支付
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" >
            
                <span>
            
                    
                    附件
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="install-iterm.html">
            
                <a href="install-iterm.html">
            
                    
                    Terminal 配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="tech-scheme.html">
            
                <a href="tech-scheme.html">
            
                    
                    项目技术方案
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3" data-path="cross-domin.md">
            
                <span>
            
                    
                    跨域
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.14.4" data-path="react-source.html">
            
                <a href="react-source.html">
            
                    
                    React 原码
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >React 原码</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <blockquote>
<p>Marion &#x524D;&#x7AEF;&#x6559;&#x7A0B; &gt; &#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x5E94;&#x77E5;&#x5E94;&#x4F1A; &gt; &#x9644;&#x4EF6; &gt; React 17.0.2 &#x6E90;&#x7801;</p>
</blockquote>
<pre class="language-"><code class="lang-javascript"><span class="token comment">/** @license React v17.0.2
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">global<span class="token punctuation">,</span> factory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&apos;object&apos;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module <span class="token operator">!==</span> <span class="token string">&apos;undefined&apos;</span>
    <span class="token operator">?</span> <span class="token function">factory</span><span class="token punctuation">(</span>exports<span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd
    <span class="token operator">?</span> <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&apos;exports&apos;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>global <span class="token operator">=</span> global <span class="token operator">||</span> self<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">(</span>global<span class="token punctuation">.</span>React <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">exports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">&apos;use strict&apos;</span><span class="token punctuation">;</span>

  <span class="token comment">// TODO: this is special because it gets imported during build.</span>
  <span class="token keyword">var</span> ReactVersion <span class="token operator">=</span> <span class="token string">&apos;17.0.2&apos;</span><span class="token punctuation">;</span>

  <span class="token comment">// ATTENTION</span>
  <span class="token comment">// When adding new symbols to this file,</span>
  <span class="token comment">// Please consider also adding to &apos;react-devtools-shared/src/backend/ReactSymbols&apos;</span>
  <span class="token comment">// The Symbol used to tag the ReactElement-like types. If there is no native Symbol</span>
  <span class="token comment">// nor polyfill, then a plain number is used for performance.</span>
  <span class="token keyword">var</span> <span class="token constant">REACT_ELEMENT_TYPE</span> <span class="token operator">=</span> <span class="token number">0xeac7</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">REACT_PORTAL_TYPE</span> <span class="token operator">=</span> <span class="token number">0xeaca</span><span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>Fragment <span class="token operator">=</span> <span class="token number">0xeacb</span><span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>StrictMode <span class="token operator">=</span> <span class="token number">0xeacc</span><span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>Profiler <span class="token operator">=</span> <span class="token number">0xead2</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">REACT_PROVIDER_TYPE</span> <span class="token operator">=</span> <span class="token number">0xeacd</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">REACT_CONTEXT_TYPE</span> <span class="token operator">=</span> <span class="token number">0xeace</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">REACT_FORWARD_REF_TYPE</span> <span class="token operator">=</span> <span class="token number">0xead0</span><span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>Suspense <span class="token operator">=</span> <span class="token number">0xead1</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">REACT_SUSPENSE_LIST_TYPE</span> <span class="token operator">=</span> <span class="token number">0xead8</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">REACT_MEMO_TYPE</span> <span class="token operator">=</span> <span class="token number">0xead3</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">REACT_LAZY_TYPE</span> <span class="token operator">=</span> <span class="token number">0xead4</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">REACT_BLOCK_TYPE</span> <span class="token operator">=</span> <span class="token number">0xead9</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">REACT_SERVER_BLOCK_TYPE</span> <span class="token operator">=</span> <span class="token number">0xeada</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">REACT_FUNDAMENTAL_TYPE</span> <span class="token operator">=</span> <span class="token number">0xead5</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">REACT_SCOPE_TYPE</span> <span class="token operator">=</span> <span class="token number">0xead7</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">REACT_OPAQUE_ID_TYPE</span> <span class="token operator">=</span> <span class="token number">0xeae0</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">REACT_DEBUG_TRACING_MODE_TYPE</span> <span class="token operator">=</span> <span class="token number">0xeae1</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">REACT_OFFSCREEN_TYPE</span> <span class="token operator">=</span> <span class="token number">0xeae2</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">REACT_LEGACY_HIDDEN_TYPE</span> <span class="token operator">=</span> <span class="token number">0xeae3</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> Symbol <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span> <span class="token operator">&amp;&amp;</span> Symbol<span class="token punctuation">.</span>for<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> symbolFor <span class="token operator">=</span> Symbol<span class="token punctuation">.</span>for<span class="token punctuation">;</span>
    <span class="token constant">REACT_ELEMENT_TYPE</span> <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.element&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">REACT_PORTAL_TYPE</span> <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.portal&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    exports<span class="token punctuation">.</span>Fragment <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.fragment&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    exports<span class="token punctuation">.</span>StrictMode <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.strict_mode&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    exports<span class="token punctuation">.</span>Profiler <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.profiler&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">REACT_PROVIDER_TYPE</span> <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.provider&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">REACT_CONTEXT_TYPE</span> <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.context&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">REACT_FORWARD_REF_TYPE</span> <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.forward_ref&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    exports<span class="token punctuation">.</span>Suspense <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.suspense&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">REACT_SUSPENSE_LIST_TYPE</span> <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.suspense_list&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">REACT_MEMO_TYPE</span> <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.memo&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">REACT_LAZY_TYPE</span> <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.lazy&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">REACT_BLOCK_TYPE</span> <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.block&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">REACT_SERVER_BLOCK_TYPE</span> <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.server.block&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">REACT_FUNDAMENTAL_TYPE</span> <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.fundamental&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">REACT_SCOPE_TYPE</span> <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.scope&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">REACT_OPAQUE_ID_TYPE</span> <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.opaque.id&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">REACT_DEBUG_TRACING_MODE_TYPE</span> <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.debug_trace_mode&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">REACT_OFFSCREEN_TYPE</span> <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.offscreen&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">REACT_LEGACY_HIDDEN_TYPE</span> <span class="token operator">=</span> <span class="token function">symbolFor</span><span class="token punctuation">(</span><span class="token string">&apos;react.legacy_hidden&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> <span class="token constant">MAYBE_ITERATOR_SYMBOL</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> Symbol <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span> <span class="token operator">&amp;&amp;</span> Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">FAUX_ITERATOR_SYMBOL</span> <span class="token operator">=</span> <span class="token string">&apos;@@iterator&apos;</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">getIteratorFn</span><span class="token punctuation">(</span><span class="token parameter">maybeIterable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>maybeIterable <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> maybeIterable <span class="token operator">!==</span> <span class="token string">&apos;object&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> maybeIterator <span class="token operator">=</span>
      <span class="token punctuation">(</span><span class="token constant">MAYBE_ITERATOR_SYMBOL</span> <span class="token operator">&amp;&amp;</span> maybeIterable<span class="token punctuation">[</span><span class="token constant">MAYBE_ITERATOR_SYMBOL</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span>
      maybeIterable<span class="token punctuation">[</span><span class="token constant">FAUX_ITERATOR_SYMBOL</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> maybeIterator <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> maybeIterator<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> hasOwnProperty <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>hasOwnProperty<span class="token punctuation">;</span>

  <span class="token keyword">var</span> <span class="token function-variable function">_assign</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> from<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        to<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> from<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> assign <span class="token operator">=</span>
    Object<span class="token punctuation">.</span>assign <span class="token operator">||</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> sources</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&apos;Object.assign target cannot be null or undefined&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">var</span> to <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> nextIndex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> nextIndex <span class="token operator">&lt;</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> nextIndex<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> nextSource <span class="token operator">=</span> arguments<span class="token punctuation">[</span>nextIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>nextSource <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">_assign</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token function">Object</span><span class="token punctuation">(</span>nextSource<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> to<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">/**
   * Keeps track of the current dispatcher.
   */</span>
  <span class="token keyword">var</span> ReactCurrentDispatcher <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * @internal
     * @type {ReactComponent}
     */</span>
    current<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">/**
   * Keeps track of the current batch&apos;s configuration such as how long an update
   * should suspend for if it needs to.
   */</span>
  <span class="token keyword">var</span> ReactCurrentBatchConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    transition<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">/**
   * Keeps track of the current owner.
   *
   * The current owner is the component who should own any components that are
   * currently being constructed.
   */</span>
  <span class="token keyword">var</span> ReactCurrentOwner <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * @internal
     * @type {ReactComponent}
     */</span>
    current<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> ReactDebugCurrentFrame <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> currentExtraStackFrame <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">setExtraStackFrame</span><span class="token punctuation">(</span><span class="token parameter">stack</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      currentExtraStackFrame <span class="token operator">=</span> stack<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token punctuation">{</span>
    ReactDebugCurrentFrame<span class="token punctuation">.</span><span class="token function-variable function">setExtraStackFrame</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">stack</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span>
        currentExtraStackFrame <span class="token operator">=</span> stack<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// Stack implementation injected by the current renderer.</span>

    ReactDebugCurrentFrame<span class="token punctuation">.</span>getCurrentStack <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    ReactDebugCurrentFrame<span class="token punctuation">.</span><span class="token function-variable function">getStackAddendum</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> stack <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span> <span class="token comment">// Add an extra top frame while an element is being validated</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>currentExtraStackFrame<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stack <span class="token operator">+=</span> currentExtraStackFrame<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token comment">// Delegate to the injected renderer-specific implementation</span>

      <span class="token keyword">var</span> impl <span class="token operator">=</span> ReactDebugCurrentFrame<span class="token punctuation">.</span>getCurrentStack<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>impl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stack <span class="token operator">+=</span> <span class="token function">impl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> stack<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * Used by act() to track whether you&apos;re inside an act() scope.
   */</span>
  <span class="token keyword">var</span> IsSomeRendererActing <span class="token operator">=</span> <span class="token punctuation">{</span>
    current<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> ReactSharedInternals <span class="token operator">=</span> <span class="token punctuation">{</span>
    ReactCurrentDispatcher<span class="token operator">:</span> ReactCurrentDispatcher<span class="token punctuation">,</span>
    ReactCurrentBatchConfig<span class="token operator">:</span> ReactCurrentBatchConfig<span class="token punctuation">,</span>
    ReactCurrentOwner<span class="token operator">:</span> ReactCurrentOwner<span class="token punctuation">,</span>
    IsSomeRendererActing<span class="token operator">:</span> IsSomeRendererActing<span class="token punctuation">,</span>
    <span class="token comment">// Used by renderers to avoid bundling object-assign twice in UMD bundles:</span>
    assign<span class="token operator">:</span> assign<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token punctuation">{</span>
    ReactSharedInternals<span class="token punctuation">.</span>ReactDebugCurrentFrame <span class="token operator">=</span> ReactDebugCurrentFrame<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// by calls to these methods by a Babel plugin.</span>
  <span class="token comment">//</span>
  <span class="token comment">// In PROD (or in packages without access to React internals),</span>
  <span class="token comment">// they are left as they are instead.</span>

  <span class="token keyword">function</span> <span class="token function">warn</span><span class="token punctuation">(</span><span class="token parameter">format</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span>
        <span class="token keyword">var</span> _len <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
          args <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>_len <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span> _len <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          _key <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        _key <span class="token operator">&lt;</span> _len<span class="token punctuation">;</span>
        _key<span class="token operator">++</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        args<span class="token punctuation">[</span>_key <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>_key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token function">printWarning</span><span class="token punctuation">(</span><span class="token string">&apos;warn&apos;</span><span class="token punctuation">,</span> format<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token parameter">format</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span>
        <span class="token keyword">var</span> _len2 <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
          args <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>_len2 <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span> _len2 <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          _key2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        _key2 <span class="token operator">&lt;</span> _len2<span class="token punctuation">;</span>
        _key2<span class="token operator">++</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        args<span class="token punctuation">[</span>_key2 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>_key2<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token function">printWarning</span><span class="token punctuation">(</span><span class="token string">&apos;error&apos;</span><span class="token punctuation">,</span> format<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">printWarning</span><span class="token punctuation">(</span><span class="token parameter">level<span class="token punctuation">,</span> format<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// When changing this logic, you might want to also</span>
    <span class="token comment">// update consoleWithStackDev.www.js as well.</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">var</span> ReactDebugCurrentFrame <span class="token operator">=</span> ReactSharedInternals<span class="token punctuation">.</span>ReactDebugCurrentFrame<span class="token punctuation">;</span>
      <span class="token keyword">var</span> stack <span class="token operator">=</span> ReactDebugCurrentFrame<span class="token punctuation">.</span><span class="token function">getStackAddendum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>stack <span class="token operator">!==</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        format <span class="token operator">+=</span> <span class="token string">&apos;%s&apos;</span><span class="token punctuation">;</span>
        args <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>stack<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">var</span> argsWithFormat <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&apos;&apos;</span> <span class="token operator">+</span> item<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Careful: RN currently depends on this prefix</span>

      argsWithFormat<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token string">&apos;Warning: &apos;</span> <span class="token operator">+</span> format<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// We intentionally don&apos;t use spread (or .apply) directly because it</span>
      <span class="token comment">// breaks IE9: https://github.com/facebook/react/issues/13610</span>
      <span class="token comment">// eslint-disable-next-line react-internal/no-production-logging</span>

      <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>console<span class="token punctuation">[</span>level<span class="token punctuation">]</span><span class="token punctuation">,</span> console<span class="token punctuation">,</span> argsWithFormat<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> didWarnStateUpdateForUnmountedComponent <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">warnNoop</span><span class="token punctuation">(</span><span class="token parameter">publicInstance<span class="token punctuation">,</span> callerName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">var</span> _constructor <span class="token operator">=</span> publicInstance<span class="token punctuation">.</span>constructor<span class="token punctuation">;</span>
      <span class="token keyword">var</span> componentName <span class="token operator">=</span>
        <span class="token punctuation">(</span>_constructor <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>_constructor<span class="token punctuation">.</span>displayName <span class="token operator">||</span> _constructor<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span>
        <span class="token string">&apos;ReactClass&apos;</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> warningKey <span class="token operator">=</span> componentName <span class="token operator">+</span> <span class="token string">&apos;.&apos;</span> <span class="token operator">+</span> callerName<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>didWarnStateUpdateForUnmountedComponent<span class="token punctuation">[</span>warningKey<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token function">error</span><span class="token punctuation">(</span>
        <span class="token string">&quot;Can&apos;t call %s on a component that is not yet mounted. &quot;</span> <span class="token operator">+</span>
          <span class="token string">&apos;This is a no-op, but it might indicate a bug in your application. &apos;</span> <span class="token operator">+</span>
          <span class="token string">&apos;Instead, assign to `this.state` directly or define a `state = {};` &apos;</span> <span class="token operator">+</span>
          <span class="token string">&apos;class property with the desired state in the %s component.&apos;</span><span class="token punctuation">,</span>
        callerName<span class="token punctuation">,</span>
        componentName
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

      didWarnStateUpdateForUnmountedComponent<span class="token punctuation">[</span>warningKey<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * This is the abstract API for an update queue.
   */</span>

  <span class="token keyword">var</span> ReactNoopUpdateQueue <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * Checks whether or not this composite component is mounted.
     * @param {ReactClass} publicInstance The instance we want to test.
     * @return {boolean} True if mounted, false otherwise.
     * @protected
     * @final
     */</span>
    <span class="token function-variable function">isMounted</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">publicInstance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">/**
     * Forces an update. This should only be invoked when it is known with
     * certainty that we are **not** in a DOM transaction.
     *
     * You may want to call this when you know that some deeper aspect of the
     * component&apos;s state has changed but `setState` was not called.
     *
     * This will not invoke `shouldComponentUpdate`, but it will invoke
     * `componentWillUpdate` and `componentDidUpdate`.
     *
     * @param {ReactClass} publicInstance The instance that should rerender.
     * @param {?function} callback Called after component is updated.
     * @param {?string} callerName name of the calling function in the public API.
     * @internal
     */</span>
    <span class="token function-variable function">enqueueForceUpdate</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">publicInstance<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> callerName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">warnNoop</span><span class="token punctuation">(</span>publicInstance<span class="token punctuation">,</span> <span class="token string">&apos;forceUpdate&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">/**
     * Replaces all of the state. Always use this or `setState` to mutate state.
     * You should treat `this.state` as immutable.
     *
     * There is no guarantee that `this.state` will be immediately updated, so
     * accessing `this.state` after calling this method may return the old value.
     *
     * @param {ReactClass} publicInstance The instance that should rerender.
     * @param {object} completeState Next state.
     * @param {?function} callback Called after component is updated.
     * @param {?string} callerName name of the calling function in the public API.
     * @internal
     */</span>
    <span class="token function-variable function">enqueueReplaceState</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>
      <span class="token parameter">publicInstance<span class="token punctuation">,</span>
      completeState<span class="token punctuation">,</span>
      callback<span class="token punctuation">,</span>
      callerName</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">warnNoop</span><span class="token punctuation">(</span>publicInstance<span class="token punctuation">,</span> <span class="token string">&apos;replaceState&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">/**
     * Sets a subset of the state. This only exists because _pendingState is
     * internal. This provides a merging strategy that is not available to deep
     * properties which is confusing. TODO: Expose pendingState or don&apos;t use it
     * during the merge.
     *
     * @param {ReactClass} publicInstance The instance that should rerender.
     * @param {object} partialState Next partial state to be merged with state.
     * @param {?function} callback Called after component is updated.
     * @param {?string} Name of the calling function in the public API.
     * @internal
     */</span>
    <span class="token function-variable function">enqueueSetState</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>
      <span class="token parameter">publicInstance<span class="token punctuation">,</span>
      partialState<span class="token punctuation">,</span>
      callback<span class="token punctuation">,</span>
      callerName</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">warnNoop</span><span class="token punctuation">(</span>publicInstance<span class="token punctuation">,</span> <span class="token string">&apos;setState&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> emptyObject <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>emptyObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * Base class helpers for the updating state of a component.
   */</span>

  <span class="token keyword">function</span> <span class="token function">Component</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context<span class="token punctuation">,</span> updater</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token operator">=</span> props<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span> <span class="token comment">// If a component has string refs, we will assign a different object later.</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>refs <span class="token operator">=</span> emptyObject<span class="token punctuation">;</span> <span class="token comment">// We initialize the default updater but the real one gets injected by the</span>
    <span class="token comment">// renderer.</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>updater <span class="token operator">=</span> updater <span class="token operator">||</span> ReactNoopUpdateQueue<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">Component</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isReactComponent <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Sets a subset of the state. Always use this to mutate
   * state. You should treat `this.state` as immutable.
   *
   * There is no guarantee that `this.state` will be immediately updated, so
   * accessing `this.state` after calling this method may return the old value.
   *
   * There is no guarantee that calls to `setState` will run synchronously,
   * as they may eventually be batched together.  You can provide an optional
   * callback that will be executed when the call to setState is actually
   * completed.
   *
   * When a function is provided to setState, it will be called at some point in
   * the future (not synchronously). It will be called with the up to date
   * component arguments (state, props, context). These values can be different
   * from this.* because your function may be called after receiveProps but before
   * shouldComponentUpdate, and this new state, props, and context will not yet be
   * assigned to this.
   *
   * @param {object|function} partialState Next partial state or function to
   *        produce next partial state to be merged with current state.
   * @param {?function} callback Called after state is updated.
   * @final
   * @protected
   */</span>

  <span class="token class-name">Component</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setState</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">partialState<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      <span class="token operator">!</span><span class="token punctuation">(</span>
        <span class="token keyword">typeof</span> partialState <span class="token operator">===</span> <span class="token string">&apos;object&apos;</span> <span class="token operator">||</span>
        <span class="token keyword">typeof</span> partialState <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span> <span class="token operator">||</span>
        partialState <span class="token operator">==</span> <span class="token keyword">null</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span>
          <span class="token string">&apos;setState(...): takes an object of state variables to update or a function which returns an object of state variables.&apos;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>updater<span class="token punctuation">.</span><span class="token function">enqueueSetState</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> partialState<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token string">&apos;setState&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Forces an update. This should only be invoked when it is known with
   * certainty that we are **not** in a DOM transaction.
   *
   * You may want to call this when you know that some deeper aspect of the
   * component&apos;s state has changed but `setState` was not called.
   *
   * This will not invoke `shouldComponentUpdate`, but it will invoke
   * `componentWillUpdate` and `componentDidUpdate`.
   *
   * @param {?function} callback Called after update is complete.
   * @final
   * @protected
   */</span>

  <span class="token class-name">Component</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">forceUpdate</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>updater<span class="token punctuation">.</span><span class="token function">enqueueForceUpdate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token string">&apos;forceUpdate&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Deprecated APIs. These APIs used to exist on classic React classes but since
   * we would like to deprecate them, we&apos;re not going to move them over to this
   * modern base class. Instead, we define a getter that warns if it&apos;s accessed.
   */</span>

  <span class="token punctuation">{</span>
    <span class="token keyword">var</span> deprecatedAPIs <span class="token operator">=</span> <span class="token punctuation">{</span>
      isMounted<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&apos;isMounted&apos;</span><span class="token punctuation">,</span>
        <span class="token string">&apos;Instead, make sure to clean up subscriptions and pending requests in &apos;</span> <span class="token operator">+</span>
          <span class="token string">&apos;componentWillUnmount to prevent memory leaks.&apos;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      replaceState<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&apos;replaceState&apos;</span><span class="token punctuation">,</span>
        <span class="token string">&apos;Refactor your code to use setState instead (see &apos;</span> <span class="token operator">+</span>
          <span class="token string">&apos;https://github.com/facebook/react/issues/3236).&apos;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> <span class="token function-variable function">defineDeprecationWarning</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">methodName<span class="token punctuation">,</span> info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token class-name">Component</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> methodName<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">warn</span><span class="token punctuation">(</span>
            <span class="token string">&apos;%s(...) is deprecated in plain JavaScript React classes. %s&apos;</span><span class="token punctuation">,</span>
            info<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            info<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> fnName <span class="token keyword">in</span> deprecatedAPIs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>deprecatedAPIs<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>fnName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">defineDeprecationWarning</span><span class="token punctuation">(</span>fnName<span class="token punctuation">,</span> deprecatedAPIs<span class="token punctuation">[</span>fnName<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">ComponentDummy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token class-name">ComponentDummy</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Component</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
  <span class="token comment">/**
   * Convenience component with default shallow equality check for sCU.
   */</span>

  <span class="token keyword">function</span> <span class="token function">PureComponent</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context<span class="token punctuation">,</span> updater</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token operator">=</span> props<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span> <span class="token comment">// If a component has string refs, we will assign a different object later.</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>refs <span class="token operator">=</span> emptyObject<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>updater <span class="token operator">=</span> updater <span class="token operator">||</span> ReactNoopUpdateQueue<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> pureComponentPrototype <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">PureComponent</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComponentDummy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  pureComponentPrototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> PureComponent<span class="token punctuation">;</span> <span class="token comment">// Avoid an extra prototype jump for these methods.</span>

  <span class="token function">assign</span><span class="token punctuation">(</span>pureComponentPrototype<span class="token punctuation">,</span> <span class="token class-name">Component</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>

  pureComponentPrototype<span class="token punctuation">.</span>isPureReactComponent <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

  <span class="token comment">// an immutable object with a single mutable value</span>
  <span class="token keyword">function</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> refObject <span class="token operator">=</span> <span class="token punctuation">{</span>
      current<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token punctuation">{</span>
      Object<span class="token punctuation">.</span><span class="token function">seal</span><span class="token punctuation">(</span>refObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> refObject<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">getWrappedName</span><span class="token punctuation">(</span><span class="token parameter">outerType<span class="token punctuation">,</span> innerType<span class="token punctuation">,</span> wrapperName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> functionName <span class="token operator">=</span> innerType<span class="token punctuation">.</span>displayName <span class="token operator">||</span> innerType<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      outerType<span class="token punctuation">.</span>displayName <span class="token operator">||</span>
      <span class="token punctuation">(</span>functionName <span class="token operator">!==</span> <span class="token string">&apos;&apos;</span>
        <span class="token operator">?</span> wrapperName <span class="token operator">+</span> <span class="token string">&apos;(&apos;</span> <span class="token operator">+</span> functionName <span class="token operator">+</span> <span class="token string">&apos;)&apos;</span>
        <span class="token operator">:</span> wrapperName<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">getContextName</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> type<span class="token punctuation">.</span>displayName <span class="token operator">||</span> <span class="token string">&apos;Context&apos;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">getComponentName</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Host root, text node or just invalid type.</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> type<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">&apos;number&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">error</span><span class="token punctuation">(</span>
          <span class="token string">&apos;Received an unexpected object in getComponentName(). &apos;</span> <span class="token operator">+</span>
            <span class="token string">&apos;This is likely a bug in React. Please file an issue.&apos;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> type<span class="token punctuation">.</span>displayName <span class="token operator">||</span> type<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">&apos;string&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> type<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> exports<span class="token punctuation">.</span>Fragment<span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">&apos;Fragment&apos;</span><span class="token punctuation">;</span>

      <span class="token keyword">case</span> <span class="token constant">REACT_PORTAL_TYPE</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">&apos;Portal&apos;</span><span class="token punctuation">;</span>

      <span class="token keyword">case</span> exports<span class="token punctuation">.</span>Profiler<span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">&apos;Profiler&apos;</span><span class="token punctuation">;</span>

      <span class="token keyword">case</span> exports<span class="token punctuation">.</span>StrictMode<span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">&apos;StrictMode&apos;</span><span class="token punctuation">;</span>

      <span class="token keyword">case</span> exports<span class="token punctuation">.</span>Suspense<span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">&apos;Suspense&apos;</span><span class="token punctuation">;</span>

      <span class="token keyword">case</span> <span class="token constant">REACT_SUSPENSE_LIST_TYPE</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">&apos;SuspenseList&apos;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">&apos;object&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token operator">%</span> math <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token constant">REACT_CONTEXT_TYPE</span><span class="token operator">:</span>
          <span class="token keyword">var</span> context <span class="token operator">=</span> type<span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token function">getContextName</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&apos;.Consumer&apos;</span><span class="token punctuation">;</span>

        <span class="token keyword">case</span> <span class="token constant">REACT_PROVIDER_TYPE</span><span class="token operator">:</span>
          <span class="token keyword">var</span> provider <span class="token operator">=</span> type<span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token function">getContextName</span><span class="token punctuation">(</span>provider<span class="token punctuation">.</span>_context<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&apos;.Provider&apos;</span><span class="token punctuation">;</span>

        <span class="token keyword">case</span> <span class="token constant">REACT_FORWARD_REF_TYPE</span><span class="token operator">:</span>
          <span class="token keyword">return</span> <span class="token function">getWrappedName</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> type<span class="token punctuation">.</span>render<span class="token punctuation">,</span> <span class="token string">&apos;ForwardRef&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">case</span> <span class="token constant">REACT_MEMO_TYPE</span><span class="token operator">:</span>
          <span class="token keyword">return</span> <span class="token function">getComponentName</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">case</span> <span class="token constant">REACT_BLOCK_TYPE</span><span class="token operator">:</span>
          <span class="token keyword">return</span> <span class="token function">getComponentName</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span>_render<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">case</span> <span class="token constant">REACT_LAZY_TYPE</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> lazyComponent <span class="token operator">=</span> type<span class="token punctuation">;</span>
          <span class="token keyword">var</span> payload <span class="token operator">=</span> lazyComponent<span class="token punctuation">.</span>_payload<span class="token punctuation">;</span>
          <span class="token keyword">var</span> init <span class="token operator">=</span> lazyComponent<span class="token punctuation">.</span>_init<span class="token punctuation">;</span>

          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">getComponentName</span><span class="token punctuation">(</span><span class="token function">init</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> hasOwnProperty$<span class="token number">1</span> <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>hasOwnProperty<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">RESERVED_PROPS</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    key<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    ref<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    __self<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    __source<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> specialPropKeyWarningShown<span class="token punctuation">,</span>
    specialPropRefWarningShown<span class="token punctuation">,</span>
    didWarnAboutStringRefs<span class="token punctuation">;</span>

  <span class="token punctuation">{</span>
    didWarnAboutStringRefs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">hasValidRef</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasOwnProperty$1</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> <span class="token string">&apos;ref&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> getter <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> <span class="token string">&apos;ref&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>getter <span class="token operator">&amp;&amp;</span> getter<span class="token punctuation">.</span>isReactWarning<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> config<span class="token punctuation">.</span>ref <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">hasValidKey</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasOwnProperty$1</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> <span class="token string">&apos;key&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> getter <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> <span class="token string">&apos;key&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>getter <span class="token operator">&amp;&amp;</span> getter<span class="token punctuation">.</span>isReactWarning<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> config<span class="token punctuation">.</span>key <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">defineKeyPropWarningGetter</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> displayName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> <span class="token function-variable function">warnAboutAccessingKey</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>specialPropKeyWarningShown<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          specialPropKeyWarningShown <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

          <span class="token function">error</span><span class="token punctuation">(</span>
            <span class="token string">&apos;%s: `key` is not a prop. Trying to access it will result &apos;</span> <span class="token operator">+</span>
              <span class="token string">&apos;in `undefined` being returned. If you need to access the same &apos;</span> <span class="token operator">+</span>
              <span class="token string">&apos;value within the child component, you should pass it as a different &apos;</span> <span class="token operator">+</span>
              <span class="token string">&apos;prop. (https://reactjs.org/link/special-props)&apos;</span><span class="token punctuation">,</span>
            displayName
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    warnAboutAccessingKey<span class="token punctuation">.</span>isReactWarning <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> <span class="token string">&apos;key&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      get<span class="token operator">:</span> warnAboutAccessingKey<span class="token punctuation">,</span>
      configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">defineRefPropWarningGetter</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> displayName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> <span class="token function-variable function">warnAboutAccessingRef</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>specialPropRefWarningShown<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          specialPropRefWarningShown <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

          <span class="token function">error</span><span class="token punctuation">(</span>
            <span class="token string">&apos;%s: `ref` is not a prop. Trying to access it will result &apos;</span> <span class="token operator">+</span>
              <span class="token string">&apos;in `undefined` being returned. If you need to access the same &apos;</span> <span class="token operator">+</span>
              <span class="token string">&apos;value within the child component, you should pass it as a different &apos;</span> <span class="token operator">+</span>
              <span class="token string">&apos;prop. (https://reactjs.org/link/special-props)&apos;</span><span class="token punctuation">,</span>
            displayName
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    warnAboutAccessingRef<span class="token punctuation">.</span>isReactWarning <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> <span class="token string">&apos;ref&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      get<span class="token operator">:</span> warnAboutAccessingRef<span class="token punctuation">,</span>
      configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">warnIfStringRefCannotBeAutoConverted</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        <span class="token keyword">typeof</span> config<span class="token punctuation">.</span>ref <span class="token operator">===</span> <span class="token string">&apos;string&apos;</span> <span class="token operator">&amp;&amp;</span>
        ReactCurrentOwner<span class="token punctuation">.</span>current <span class="token operator">&amp;&amp;</span>
        config<span class="token punctuation">.</span>__self <span class="token operator">&amp;&amp;</span>
        ReactCurrentOwner<span class="token punctuation">.</span>current<span class="token punctuation">.</span>stateNode <span class="token operator">!==</span> config<span class="token punctuation">.</span>__self
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> componentName <span class="token operator">=</span> <span class="token function">getComponentName</span><span class="token punctuation">(</span>ReactCurrentOwner<span class="token punctuation">.</span>current<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>didWarnAboutStringRefs<span class="token punctuation">[</span>componentName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">error</span><span class="token punctuation">(</span>
            <span class="token string">&apos;Component &quot;%s&quot; contains the string ref &quot;%s&quot;. &apos;</span> <span class="token operator">+</span>
              <span class="token string">&apos;Support for string refs will be removed in a future major release. &apos;</span> <span class="token operator">+</span>
              <span class="token string">&apos;This case cannot be automatically converted to an arrow function. &apos;</span> <span class="token operator">+</span>
              <span class="token string">&apos;We ask you to manually fix this case by using useRef() or createRef() instead. &apos;</span> <span class="token operator">+</span>
              <span class="token string">&apos;Learn more about using refs safely here: &apos;</span> <span class="token operator">+</span>
              <span class="token string">&apos;https://reactjs.org/link/strict-mode-string-ref&apos;</span><span class="token punctuation">,</span>
            componentName<span class="token punctuation">,</span>
            config<span class="token punctuation">.</span>ref
          <span class="token punctuation">)</span><span class="token punctuation">;</span>

          didWarnAboutStringRefs<span class="token punctuation">[</span>componentName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * Factory method to create a new React element. This no longer adheres to
   * the class pattern, so do not use new to call it. Also, instanceof check
   * will not work. Instead test {% endmath %}typeof field against Symbol.for(&apos;react.element&apos;) to check
   * if something is a React Element.
   *
   * @param {*} type
   * @param {*} props
   * @param {*} key
   * @param {string|object} ref
   * @param {*} owner
   * @param {*} self A *temporary* helper to detect places where `this` is
   * different from the `owner` when React.createElement is called, so that we
   * can warn. We want to get rid of owner and replace string `ref`s with arrow
   * functions, and as long as `this` and owner are the same, there will be no
   * change in behavior.
   * @param {*} source An annotation object (added by a transpiler or otherwise)
   * indicating filename, line number, and/or other information.
   * @internal
   */</span>

  <span class="token keyword">var</span> <span class="token function-variable function">ReactElement</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> key<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> self<span class="token punctuation">,</span> source<span class="token punctuation">,</span> owner<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> element <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token comment">// This tag allows us to uniquely identify this as a React Element</span>
      <span class="token punctuation">{</span><span class="token operator">%</span> math <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span><span class="token operator">:</span> <span class="token constant">REACT_ELEMENT_TYPE</span><span class="token punctuation">,</span>
      <span class="token comment">// Built-in properties that belong on the element</span>
      type<span class="token operator">:</span> type<span class="token punctuation">,</span>
      key<span class="token operator">:</span> key<span class="token punctuation">,</span>
      ref<span class="token operator">:</span> ref<span class="token punctuation">,</span>
      props<span class="token operator">:</span> props<span class="token punctuation">,</span>
      <span class="token comment">// Record the component responsible for creating this element.</span>
      _owner<span class="token operator">:</span> owner<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token punctuation">{</span>
      <span class="token comment">// The validation flag is currently mutative. We put it on</span>
      <span class="token comment">// an external backing store so that we can freeze the whole object.</span>
      <span class="token comment">// This can be replaced with a WeakMap once they are implemented in</span>
      <span class="token comment">// commonly used development environments.</span>
      element<span class="token punctuation">.</span>_store <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// To make comparing ReactElements easier for testing purposes, we make</span>
      <span class="token comment">// the validation flag non-enumerable (where possible, which should</span>
      <span class="token comment">// include every environment we run tests in), so the test framework</span>
      <span class="token comment">// ignores it.</span>

      Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>_store<span class="token punctuation">,</span> <span class="token string">&apos;validated&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        configurable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        writable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        value<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// self and source are DEV only properties.</span>

      Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token string">&apos;_self&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        configurable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        writable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        value<span class="token operator">:</span> self<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Two elements created in two different places should be considered</span>
      <span class="token comment">// equal for testing purposes and therefore we hide it from enumeration.</span>

      Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token string">&apos;_source&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        configurable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        writable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        value<span class="token operator">:</span> source<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span>freeze<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> element<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Create and return a new ReactElement of the given type.
   * See https://reactjs.org/docs/react-api.html#createelement
   */</span>

  <span class="token keyword">function</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> config<span class="token punctuation">,</span> children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> propName<span class="token punctuation">;</span> <span class="token comment">// Reserved names are extracted</span>

    <span class="token keyword">var</span> props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> key <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ref <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> source <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>config <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasValidRef</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ref <span class="token operator">=</span> config<span class="token punctuation">.</span>ref<span class="token punctuation">;</span>

        <span class="token punctuation">{</span>
          <span class="token function">warnIfStringRefCannotBeAutoConverted</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasValidKey</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        key <span class="token operator">=</span> <span class="token string">&apos;&apos;</span> <span class="token operator">+</span> config<span class="token punctuation">.</span>key<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      self <span class="token operator">=</span> config<span class="token punctuation">.</span>__self <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> config<span class="token punctuation">.</span>__self<span class="token punctuation">;</span>
      source <span class="token operator">=</span> config<span class="token punctuation">.</span>__source <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> config<span class="token punctuation">.</span>__source<span class="token punctuation">;</span> <span class="token comment">// Remaining properties are added to a new props object</span>

      <span class="token keyword">for</span> <span class="token punctuation">(</span>propName <span class="token keyword">in</span> config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>
          <span class="token function">hasOwnProperty$1</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> propName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
          <span class="token operator">!</span><span class="token constant">RESERVED_PROPS</span><span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>propName<span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
          props<span class="token punctuation">[</span>propName<span class="token punctuation">]</span> <span class="token operator">=</span> config<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token comment">// Children can be more than one argument, and those are transferred onto</span>
    <span class="token comment">// the newly allocated props object.</span>

    <span class="token keyword">var</span> childrenLength <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>childrenLength <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      props<span class="token punctuation">.</span>children <span class="token operator">=</span> children<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>childrenLength <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> childArray <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span>childrenLength<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> childrenLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        childArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span>freeze<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>childArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      props<span class="token punctuation">.</span>children <span class="token operator">=</span> childArray<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">// Resolve default props</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">&amp;&amp;</span> type<span class="token punctuation">.</span>defaultProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> defaultProps <span class="token operator">=</span> type<span class="token punctuation">.</span>defaultProps<span class="token punctuation">;</span>

      <span class="token keyword">for</span> <span class="token punctuation">(</span>propName <span class="token keyword">in</span> defaultProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">[</span>propName<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          props<span class="token punctuation">[</span>propName<span class="token punctuation">]</span> <span class="token operator">=</span> defaultProps<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">||</span> ref<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> displayName <span class="token operator">=</span>
          <span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span>
            <span class="token operator">?</span> type<span class="token punctuation">.</span>displayName <span class="token operator">||</span> type<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token string">&apos;Unknown&apos;</span>
            <span class="token operator">:</span> type<span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">defineKeyPropWarningGetter</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> displayName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>ref<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">defineRefPropWarningGetter</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> displayName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token function">ReactElement</span><span class="token punctuation">(</span>
      type<span class="token punctuation">,</span>
      key<span class="token punctuation">,</span>
      ref<span class="token punctuation">,</span>
      self<span class="token punctuation">,</span>
      source<span class="token punctuation">,</span>
      ReactCurrentOwner<span class="token punctuation">.</span>current<span class="token punctuation">,</span>
      props
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">cloneAndReplaceKey</span><span class="token punctuation">(</span><span class="token parameter">oldElement<span class="token punctuation">,</span> newKey</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> newElement <span class="token operator">=</span> <span class="token function">ReactElement</span><span class="token punctuation">(</span>
      oldElement<span class="token punctuation">.</span>type<span class="token punctuation">,</span>
      newKey<span class="token punctuation">,</span>
      oldElement<span class="token punctuation">.</span>ref<span class="token punctuation">,</span>
      oldElement<span class="token punctuation">.</span>_self<span class="token punctuation">,</span>
      oldElement<span class="token punctuation">.</span>_source<span class="token punctuation">,</span>
      oldElement<span class="token punctuation">.</span>_owner<span class="token punctuation">,</span>
      oldElement<span class="token punctuation">.</span>props
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> newElement<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * Clone and return a new ReactElement using element as the starting point.
   * See https://reactjs.org/docs/react-api.html#cloneelement
   */</span>

  <span class="token keyword">function</span> <span class="token function">cloneElement</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> config<span class="token punctuation">,</span> children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>element <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> element <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span>
          <span class="token string">&apos;React.cloneElement(...): The argument must be a React element, but you passed &apos;</span> <span class="token operator">+</span>
            element <span class="token operator">+</span>
            <span class="token string">&apos;.&apos;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> propName<span class="token punctuation">;</span> <span class="token comment">// Original props are copied</span>

    <span class="token keyword">var</span> props <span class="token operator">=</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> element<span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Reserved names are extracted</span>

    <span class="token keyword">var</span> key <span class="token operator">=</span> element<span class="token punctuation">.</span>key<span class="token punctuation">;</span>
    <span class="token keyword">var</span> ref <span class="token operator">=</span> element<span class="token punctuation">.</span>ref<span class="token punctuation">;</span> <span class="token comment">// Self is preserved since the owner is preserved.</span>

    <span class="token keyword">var</span> self <span class="token operator">=</span> element<span class="token punctuation">.</span>_self<span class="token punctuation">;</span> <span class="token comment">// Source is preserved since cloneElement is unlikely to be targeted by a</span>
    <span class="token comment">// transpiler, and the original source is probably a better indicator of the</span>
    <span class="token comment">// true owner.</span>

    <span class="token keyword">var</span> source <span class="token operator">=</span> element<span class="token punctuation">.</span>_source<span class="token punctuation">;</span> <span class="token comment">// Owner will be preserved, unless ref is overridden</span>

    <span class="token keyword">var</span> owner <span class="token operator">=</span> element<span class="token punctuation">.</span>_owner<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>config <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasValidRef</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Silently steal the ref from the parent.</span>
        ref <span class="token operator">=</span> config<span class="token punctuation">.</span>ref<span class="token punctuation">;</span>
        owner <span class="token operator">=</span> ReactCurrentOwner<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasValidKey</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        key <span class="token operator">=</span> <span class="token string">&apos;&apos;</span> <span class="token operator">+</span> config<span class="token punctuation">.</span>key<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token comment">// Remaining properties override existing props</span>

      <span class="token keyword">var</span> defaultProps<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> element<span class="token punctuation">.</span>type<span class="token punctuation">.</span>defaultProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        defaultProps <span class="token operator">=</span> element<span class="token punctuation">.</span>type<span class="token punctuation">.</span>defaultProps<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">for</span> <span class="token punctuation">(</span>propName <span class="token keyword">in</span> config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>
          <span class="token function">hasOwnProperty$1</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> propName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
          <span class="token operator">!</span><span class="token constant">RESERVED_PROPS</span><span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>propName<span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">[</span>propName<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> defaultProps <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Resolve default props</span>
            props<span class="token punctuation">[</span>propName<span class="token punctuation">]</span> <span class="token operator">=</span> defaultProps<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            props<span class="token punctuation">[</span>propName<span class="token punctuation">]</span> <span class="token operator">=</span> config<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token comment">// Children can be more than one argument, and those are transferred onto</span>
    <span class="token comment">// the newly allocated props object.</span>

    <span class="token keyword">var</span> childrenLength <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>childrenLength <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      props<span class="token punctuation">.</span>children <span class="token operator">=</span> children<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>childrenLength <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> childArray <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span>childrenLength<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> childrenLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        childArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      props<span class="token punctuation">.</span>children <span class="token operator">=</span> childArray<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token function">ReactElement</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>type<span class="token punctuation">,</span> key<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> self<span class="token punctuation">,</span> source<span class="token punctuation">,</span> owner<span class="token punctuation">,</span> props<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * Verifies the object is a ReactElement.
   * See https://reactjs.org/docs/react-api.html#isvalidelement
   * @param {?object} object
   * @return {boolean} True if `object` is a ReactElement.
   * @final
   */</span>

  <span class="token keyword">function</span> <span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token parameter">object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token keyword">typeof</span> object <span class="token operator">===</span> <span class="token string">&apos;object&apos;</span> <span class="token operator">&amp;&amp;</span>
      object <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span>
      object<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token operator">%</span> endmath <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span> <span class="token operator">===</span> <span class="token constant">REACT_ELEMENT_TYPE</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> <span class="token constant">SEPARATOR</span> <span class="token operator">=</span> <span class="token string">&apos;.&apos;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">SUBSEPARATOR</span> <span class="token operator">=</span> <span class="token string">&apos;:&apos;</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * Escape and wrap key so it is safe to use as a reactid
   *
   * @param {string} key to be escaped.
   * @return {string} the escaped key.
   */</span>

  <span class="token keyword">function</span> <span class="token function">escape</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> escapeRegex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[=:]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> escaperLookup <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token string">&apos;=&apos;</span><span class="token operator">:</span> <span class="token string">&apos;=0&apos;</span><span class="token punctuation">,</span>
      <span class="token string">&apos;:&apos;</span><span class="token operator">:</span> <span class="token string">&apos;=2&apos;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> escapedString <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>escapeRegex<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">match</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> escaperLookup<span class="token punctuation">[</span>match<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&apos;$&apos;</span> <span class="token operator">+</span> escapedString<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * TODO: Test that a single child and an array with one item have the same key
   * pattern.
   */</span>

  <span class="token keyword">var</span> didWarnAboutMaps <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> userProvidedKeyEscapeRegex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">escapeUserProvidedKey</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>userProvidedKeyEscapeRegex<span class="token punctuation">,</span> <span class="token string">&apos;$&amp;/&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * Generate a key string that identifies a element within a set.
   *
   * @param {*} element A element that could contain a manual key.
   * @param {number} index Index that is used if a manual key is not provided.
   * @return {string}
   */</span>

  <span class="token keyword">function</span> <span class="token function">getElementKey</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do some typechecking here since we call this blindly. We want to ensure</span>
    <span class="token comment">// that we don&apos;t block potential future ES APIs.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      <span class="token keyword">typeof</span> element <span class="token operator">===</span> <span class="token string">&apos;object&apos;</span> <span class="token operator">&amp;&amp;</span>
      element <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span>
      element<span class="token punctuation">.</span>key <span class="token operator">!=</span> <span class="token keyword">null</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Explicit key</span>
      <span class="token keyword">return</span> <span class="token function">escape</span><span class="token punctuation">(</span><span class="token string">&apos;&apos;</span> <span class="token operator">+</span> element<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">// Implicit key determined by the index in the set</span>

    <span class="token keyword">return</span> index<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">mapIntoArray</span><span class="token punctuation">(</span><span class="token parameter">children<span class="token punctuation">,</span> array<span class="token punctuation">,</span> escapedPrefix<span class="token punctuation">,</span> nameSoFar<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> type <span class="token operator">=</span> <span class="token keyword">typeof</span> children<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&apos;undefined&apos;</span> <span class="token operator">||</span> type <span class="token operator">===</span> <span class="token string">&apos;boolean&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// All of the above are perceived as null.</span>
      children <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> invokeCallback <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>children <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      invokeCallback <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&apos;string&apos;</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token string">&apos;number&apos;</span><span class="token operator">:</span>
          invokeCallback <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>

        <span class="token keyword">case</span> <span class="token string">&apos;object&apos;</span><span class="token operator">:</span>
          <span class="token keyword">switch</span> <span class="token punctuation">(</span>children<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token operator">%</span> math <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token constant">REACT_ELEMENT_TYPE</span><span class="token operator">:</span>
            <span class="token keyword">case</span> <span class="token constant">REACT_PORTAL_TYPE</span><span class="token operator">:</span>
              invokeCallback <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>invokeCallback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> _child <span class="token operator">=</span> children<span class="token punctuation">;</span>
      <span class="token keyword">var</span> mappedChild <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span>_child<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// If it&apos;s the only child, treat the name as if it was wrapped in an array</span>
      <span class="token comment">// so that it&apos;s consistent if the number of children grows:</span>

      <span class="token keyword">var</span> childKey <span class="token operator">=</span>
        nameSoFar <span class="token operator">===</span> <span class="token string">&apos;&apos;</span> <span class="token operator">?</span> <span class="token constant">SEPARATOR</span> <span class="token operator">+</span> <span class="token function">getElementKey</span><span class="token punctuation">(</span>_child<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> nameSoFar<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>mappedChild<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> escapedChildKey <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>childKey <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          escapedChildKey <span class="token operator">=</span> <span class="token function">escapeUserProvidedKey</span><span class="token punctuation">(</span>childKey<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&apos;/&apos;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token function">mapIntoArray</span><span class="token punctuation">(</span>mappedChild<span class="token punctuation">,</span> array<span class="token punctuation">,</span> escapedChildKey<span class="token punctuation">,</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> c<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mappedChild <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span>mappedChild<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          mappedChild <span class="token operator">=</span> <span class="token function">cloneAndReplaceKey</span><span class="token punctuation">(</span>
            mappedChild<span class="token punctuation">,</span> <span class="token comment">// Keep both the (mapped) and old keys if they differ, just as</span>
            <span class="token comment">// traverseAllChildren used to do for objects as children</span>
            escapedPrefix <span class="token operator">+</span> <span class="token comment">// $FlowFixMe Flow incorrectly thinks React.Portal doesn&apos;t have a key</span>
              <span class="token punctuation">(</span>mappedChild<span class="token punctuation">.</span>key <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>_child <span class="token operator">||</span> _child<span class="token punctuation">.</span>key <span class="token operator">!==</span> mappedChild<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token comment">// $FlowFixMe Flow incorrectly thinks existing element&apos;s key can be a number</span>
                <span class="token operator">?</span> <span class="token function">escapeUserProvidedKey</span><span class="token punctuation">(</span><span class="token string">&apos;&apos;</span> <span class="token operator">+</span> mappedChild<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&apos;/&apos;</span>
                <span class="token operator">:</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">)</span> <span class="token operator">+</span>
              childKey
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        array<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>mappedChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> child<span class="token punctuation">;</span>
    <span class="token keyword">var</span> nextName<span class="token punctuation">;</span>
    <span class="token keyword">var</span> subtreeCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// Count of children found in the current subtree.</span>

    <span class="token keyword">var</span> nextNamePrefix <span class="token operator">=</span>
      nameSoFar <span class="token operator">===</span> <span class="token string">&apos;&apos;</span> <span class="token operator">?</span> <span class="token constant">SEPARATOR</span> <span class="token operator">:</span> nameSoFar <span class="token operator">+</span> <span class="token constant">SUBSEPARATOR</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        child <span class="token operator">=</span> children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        nextName <span class="token operator">=</span> nextNamePrefix <span class="token operator">+</span> <span class="token function">getElementKey</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        subtreeCount <span class="token operator">+=</span> <span class="token function">mapIntoArray</span><span class="token punctuation">(</span>
          child<span class="token punctuation">,</span>
          array<span class="token punctuation">,</span>
          escapedPrefix<span class="token punctuation">,</span>
          nextName<span class="token punctuation">,</span>
          callback
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> iteratorFn <span class="token operator">=</span> <span class="token function">getIteratorFn</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> iteratorFn <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> iterableChildren <span class="token operator">=</span> children<span class="token punctuation">;</span>

        <span class="token punctuation">{</span>
          <span class="token comment">// Warn about using Maps as children</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>iteratorFn <span class="token operator">===</span> iterableChildren<span class="token punctuation">.</span>entries<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>didWarnAboutMaps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">warn</span><span class="token punctuation">(</span>
                <span class="token string">&apos;Using Maps as children is not supported. &apos;</span> <span class="token operator">+</span>
                  <span class="token string">&apos;Use an array of keyed ReactElements instead.&apos;</span>
              <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            didWarnAboutMaps <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">var</span> iterator <span class="token operator">=</span> <span class="token function">iteratorFn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>iterableChildren<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> step<span class="token punctuation">;</span>
        <span class="token keyword">var</span> ii <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>step <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          child <span class="token operator">=</span> step<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
          nextName <span class="token operator">=</span> nextNamePrefix <span class="token operator">+</span> <span class="token function">getElementKey</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> ii<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          subtreeCount <span class="token operator">+=</span> <span class="token function">mapIntoArray</span><span class="token punctuation">(</span>
            child<span class="token punctuation">,</span>
            array<span class="token punctuation">,</span>
            escapedPrefix<span class="token punctuation">,</span>
            nextName<span class="token punctuation">,</span>
            callback
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&apos;object&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> childrenString <span class="token operator">=</span> <span class="token string">&apos;&apos;</span> <span class="token operator">+</span> children<span class="token punctuation">;</span>

        <span class="token punctuation">{</span>
          <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span>
              <span class="token string">&apos;Objects are not valid as a React child (found: &apos;</span> <span class="token operator">+</span>
                <span class="token punctuation">(</span>childrenString <span class="token operator">===</span> <span class="token string">&apos;[object Object]&apos;</span>
                  <span class="token operator">?</span> <span class="token string">&apos;object with keys {&apos;</span> <span class="token operator">+</span>
                    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&apos;, &apos;</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                    <span class="token string">&apos;}&apos;</span>
                  <span class="token operator">:</span> childrenString<span class="token punctuation">)</span> <span class="token operator">+</span>
                <span class="token string">&apos;). If you meant to render a collection of children, use an array instead.&apos;</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> subtreeCount<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * Maps children that are typically specified as `props.children`.
   *
   * See https://reactjs.org/docs/react-api.html#reactchildrenmap
   *
   * The provided mapFunction(child, index) will be called for each
   * leaf child.
   *
   * @param {?*} children Children tree container.
   * @param {function(*, int)} func The map function.
   * @param {*} context Context for mapFunction.
   * @return {object} Object containing the ordered map of results.
   */</span>
  <span class="token keyword">function</span> <span class="token function">mapChildren</span><span class="token punctuation">(</span><span class="token parameter">children<span class="token punctuation">,</span> func<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>children <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> children<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">mapIntoArray</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> result<span class="token punctuation">,</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> child<span class="token punctuation">,</span> count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * Count the number of children that are typically specified as
   * `props.children`.
   *
   * See https://reactjs.org/docs/react-api.html#reactchildrencount
   *
   * @param {?*} children Children tree container.
   * @return {number} The number of children.
   */</span>

  <span class="token keyword">function</span> <span class="token function">countChildren</span><span class="token punctuation">(</span><span class="token parameter">children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">mapChildren</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      n<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// Don&apos;t return anything</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> n<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * Iterates through children that are typically specified as `props.children`.
   *
   * See https://reactjs.org/docs/react-api.html#reactchildrenforeach
   *
   * The provided forEachFunc(child, index) will be called for each
   * leaf child.
   *
   * @param {?*} children Children tree container.
   * @param {function(*, int)} forEachFunc
   * @param {*} forEachContext Context for forEachContext.
   */</span>
  <span class="token keyword">function</span> <span class="token function">forEachChildren</span><span class="token punctuation">(</span><span class="token parameter">children<span class="token punctuation">,</span> forEachFunc<span class="token punctuation">,</span> forEachContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">mapChildren</span><span class="token punctuation">(</span>
      children<span class="token punctuation">,</span>
      <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">forEachFunc</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Don&apos;t return anything.</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      forEachContext
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * Flatten a children object (typically specified as `props.children`) and
   * return an array with appropriately re-keyed children.
   *
   * See https://reactjs.org/docs/react-api.html#reactchildrentoarray
   */</span>

  <span class="token keyword">function</span> <span class="token function">toArray</span><span class="token punctuation">(</span><span class="token parameter">children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token function">mapChildren</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> child<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * Returns the first child in a collection of children and verifies that there
   * is only one child in the collection.
   *
   * See https://reactjs.org/docs/react-api.html#reactchildrenonly
   *
   * The current implementation of this function assumes that a single child gets
   * passed without a wrapper, but the purpose of this helper function is to
   * abstract away the particular structure of children.
   *
   * @param {?object} children Child collection structure.
   * @return {ReactElement} The first and only `ReactElement` contained in the
   * structure.
   */</span>

  <span class="token keyword">function</span> <span class="token function">onlyChild</span><span class="token punctuation">(</span><span class="token parameter">children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isValidElement</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span>
          <span class="token string">&apos;React.Children.only expected to receive a single React element child.&apos;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> children<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token parameter">defaultValue<span class="token punctuation">,</span> calculateChangedBits</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>calculateChangedBits <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      calculateChangedBits <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>
          calculateChangedBits <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span>
          <span class="token keyword">typeof</span> calculateChangedBits <span class="token operator">!==</span> <span class="token string">&apos;function&apos;</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">error</span><span class="token punctuation">(</span>
            <span class="token string">&apos;createContext: Expected the optional second argument to be a &apos;</span> <span class="token operator">+</span>
              <span class="token string">&apos;function. Instead received: %s&apos;</span><span class="token punctuation">,</span>
            calculateChangedBits
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> context <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span><span class="token operator">%</span> endmath <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span><span class="token operator">:</span> <span class="token constant">REACT_CONTEXT_TYPE</span><span class="token punctuation">,</span>
      _calculateChangedBits<span class="token operator">:</span> calculateChangedBits<span class="token punctuation">,</span>
      <span class="token comment">// As a workaround to support multiple concurrent renderers, we categorize</span>
      <span class="token comment">// some renderers as primary and others as secondary. We only expect</span>
      <span class="token comment">// there to be two concurrent renderers at most: React Native (primary) and</span>
      <span class="token comment">// Fabric (secondary); React DOM (primary) and React ART (secondary).</span>
      <span class="token comment">// Secondary renderers store their context values on separate fields.</span>
      _currentValue<span class="token operator">:</span> defaultValue<span class="token punctuation">,</span>
      _currentValue2<span class="token operator">:</span> defaultValue<span class="token punctuation">,</span>
      <span class="token comment">// Used to track how many concurrent renderers this context currently</span>
      <span class="token comment">// supports within in a single renderer. Such as parallel server rendering.</span>
      _threadCount<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token comment">// These are circular</span>
      Provider<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      Consumer<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span>Provider <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span><span class="token operator">%</span> math <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span><span class="token operator">:</span> <span class="token constant">REACT_PROVIDER_TYPE</span><span class="token punctuation">,</span>
      _context<span class="token operator">:</span> context<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> hasWarnedAboutUsingNestedContextConsumers <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> hasWarnedAboutUsingConsumerProvider <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> hasWarnedAboutDisplayNameOnConsumer <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token punctuation">{</span>
      <span class="token comment">// A separate object, but proxies back to the original context object for</span>
      <span class="token comment">// backwards compatibility. It has a different {% endmath %}typeof, so we can properly</span>
      <span class="token comment">// warn for the incorrect usage of Context as a Consumer.</span>
      <span class="token keyword">var</span> Consumer <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token punctuation">{</span><span class="token operator">%</span> math <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span><span class="token operator">:</span> <span class="token constant">REACT_CONTEXT_TYPE</span><span class="token punctuation">,</span>
        _context<span class="token operator">:</span> context<span class="token punctuation">,</span>
        _calculateChangedBits<span class="token operator">:</span> context<span class="token punctuation">.</span>_calculateChangedBits<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// $FlowFixMe: Flow complains about not setting a value, which is intentional here</span>

      Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>Consumer<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        Provider<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hasWarnedAboutUsingConsumerProvider<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              hasWarnedAboutUsingConsumerProvider <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

              <span class="token function">error</span><span class="token punctuation">(</span>
                <span class="token string">&apos;Rendering &lt;Context.Consumer.Provider&gt; is not supported and will be removed in &apos;</span> <span class="token operator">+</span>
                  <span class="token string">&apos;a future major release. Did you mean to render &lt;Context.Provider&gt; instead?&apos;</span>
              <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">return</span> context<span class="token punctuation">.</span>Provider<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_Provider</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            context<span class="token punctuation">.</span>Provider <span class="token operator">=</span> _Provider<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        _currentValue<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> context<span class="token punctuation">.</span>_currentValue<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_currentValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            context<span class="token punctuation">.</span>_currentValue <span class="token operator">=</span> _currentValue<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        _currentValue2<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> context<span class="token punctuation">.</span>_currentValue2<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_currentValue2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            context<span class="token punctuation">.</span>_currentValue2 <span class="token operator">=</span> _currentValue2<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        _threadCount<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> context<span class="token punctuation">.</span>_threadCount<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_threadCount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            context<span class="token punctuation">.</span>_threadCount <span class="token operator">=</span> _threadCount<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        Consumer<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hasWarnedAboutUsingNestedContextConsumers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              hasWarnedAboutUsingNestedContextConsumers <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

              <span class="token function">error</span><span class="token punctuation">(</span>
                <span class="token string">&apos;Rendering &lt;Context.Consumer.Consumer&gt; is not supported and will be removed in &apos;</span> <span class="token operator">+</span>
                  <span class="token string">&apos;a future major release. Did you mean to render &lt;Context.Consumer&gt; instead?&apos;</span>
              <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">return</span> context<span class="token punctuation">.</span>Consumer<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        displayName<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> context<span class="token punctuation">.</span>displayName<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">displayName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hasWarnedAboutDisplayNameOnConsumer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">warn</span><span class="token punctuation">(</span>
                <span class="token string">&apos;Setting `displayName` on Context.Consumer has no effect. &apos;</span> <span class="token operator">+</span>
                  <span class="token string">&quot;You should set it directly on the context with Context.displayName = &apos;%s&apos;.&quot;</span><span class="token punctuation">,</span>
                displayName
              <span class="token punctuation">)</span><span class="token punctuation">;</span>

              hasWarnedAboutDisplayNameOnConsumer <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// $FlowFixMe: Flow complains about missing properties because it doesn&apos;t understand defineProperty</span>

      context<span class="token punctuation">.</span>Consumer <span class="token operator">=</span> Consumer<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">{</span>
      context<span class="token punctuation">.</span>_currentRenderer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      context<span class="token punctuation">.</span>_currentRenderer2 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> context<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> Uninitialized <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> Pending <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> Resolved <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> Rejected <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">lazyInitializer</span><span class="token punctuation">(</span><span class="token parameter">payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>payload<span class="token punctuation">.</span>_status <span class="token operator">===</span> Uninitialized<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> ctor <span class="token operator">=</span> payload<span class="token punctuation">.</span>_result<span class="token punctuation">;</span>
      <span class="token keyword">var</span> thenable <span class="token operator">=</span> <span class="token function">ctor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Transition to the next state.</span>

      <span class="token keyword">var</span> pending <span class="token operator">=</span> payload<span class="token punctuation">;</span>
      pending<span class="token punctuation">.</span>_status <span class="token operator">=</span> Pending<span class="token punctuation">;</span>
      pending<span class="token punctuation">.</span>_result <span class="token operator">=</span> thenable<span class="token punctuation">;</span>
      thenable<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
        <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">moduleObject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>payload<span class="token punctuation">.</span>_status <span class="token operator">===</span> Pending<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> defaultExport <span class="token operator">=</span> moduleObject<span class="token punctuation">.</span>default<span class="token punctuation">;</span>

            <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>defaultExport <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">error</span><span class="token punctuation">(</span>
                  <span class="token string">&apos;lazy: Expected the result of a dynamic import() call. &apos;</span> <span class="token operator">+</span>
                    <span class="token string">&apos;Instead received: %s\n\nYour code should look like: \n  &apos;</span> <span class="token operator">+</span> <span class="token comment">// Break up imports to avoid accidentally parsing them as dependencies.</span>
                    <span class="token string">&apos;const MyComponent = lazy(() =&gt; imp&apos;</span> <span class="token operator">+</span>
                    <span class="token string">&quot;ort(&apos;./MyComponent&apos;))&quot;</span><span class="token punctuation">,</span>
                  moduleObject
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token comment">// Transition to the next state.</span>

            <span class="token keyword">var</span> resolved <span class="token operator">=</span> payload<span class="token punctuation">;</span>
            resolved<span class="token punctuation">.</span>_status <span class="token operator">=</span> Resolved<span class="token punctuation">;</span>
            resolved<span class="token punctuation">.</span>_result <span class="token operator">=</span> defaultExport<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>payload<span class="token punctuation">.</span>_status <span class="token operator">===</span> Pending<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Transition to the next state.</span>
            <span class="token keyword">var</span> rejected <span class="token operator">=</span> payload<span class="token punctuation">;</span>
            rejected<span class="token punctuation">.</span>_status <span class="token operator">=</span> Rejected<span class="token punctuation">;</span>
            rejected<span class="token punctuation">.</span>_result <span class="token operator">=</span> error<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>payload<span class="token punctuation">.</span>_status <span class="token operator">===</span> Resolved<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> payload<span class="token punctuation">.</span>_result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> payload<span class="token punctuation">.</span>_result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token parameter">ctor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> payload <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token comment">// We use these fields to store the result.</span>
      _status<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
      _result<span class="token operator">:</span> ctor<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> lazyType <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span><span class="token operator">%</span> endmath <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span><span class="token operator">:</span> <span class="token constant">REACT_LAZY_TYPE</span><span class="token punctuation">,</span>
      _payload<span class="token operator">:</span> payload<span class="token punctuation">,</span>
      _init<span class="token operator">:</span> lazyInitializer<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token punctuation">{</span>
      <span class="token comment">// In production, this would just set it on the object.</span>
      <span class="token keyword">var</span> defaultProps<span class="token punctuation">;</span>
      <span class="token keyword">var</span> propTypes<span class="token punctuation">;</span> <span class="token comment">// $FlowFixMe</span>

      Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>lazyType<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        defaultProps<span class="token operator">:</span> <span class="token punctuation">{</span>
          configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> defaultProps<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newDefaultProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">error</span><span class="token punctuation">(</span>
              <span class="token string">&apos;React.lazy(...): It is not supported to assign `defaultProps` to &apos;</span> <span class="token operator">+</span>
                <span class="token string">&apos;a lazy component import. Either specify them where the component &apos;</span> <span class="token operator">+</span>
                <span class="token string">&apos;is defined, or create a wrapping component around it.&apos;</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>

            defaultProps <span class="token operator">=</span> newDefaultProps<span class="token punctuation">;</span> <span class="token comment">// Match production behavior more closely:</span>
            <span class="token comment">// $FlowFixMe</span>

            Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>lazyType<span class="token punctuation">,</span> <span class="token string">&apos;defaultProps&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
              enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        propTypes<span class="token operator">:</span> <span class="token punctuation">{</span>
          configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> propTypes<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newPropTypes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">error</span><span class="token punctuation">(</span>
              <span class="token string">&apos;React.lazy(...): It is not supported to assign `propTypes` to &apos;</span> <span class="token operator">+</span>
                <span class="token string">&apos;a lazy component import. Either specify them where the component &apos;</span> <span class="token operator">+</span>
                <span class="token string">&apos;is defined, or create a wrapping component around it.&apos;</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>

            propTypes <span class="token operator">=</span> newPropTypes<span class="token punctuation">;</span> <span class="token comment">// Match production behavior more closely:</span>
            <span class="token comment">// $FlowFixMe</span>

            Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>lazyType<span class="token punctuation">,</span> <span class="token string">&apos;propTypes&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
              enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> lazyType<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token parameter">render</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>render <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> render<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token operator">%</span> math <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span> <span class="token operator">===</span> <span class="token constant">REACT_MEMO_TYPE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">error</span><span class="token punctuation">(</span>
          <span class="token string">&apos;forwardRef requires a render function but received a `memo` &apos;</span> <span class="token operator">+</span>
            <span class="token string">&apos;component. Instead of forwardRef(memo(...)), use &apos;</span> <span class="token operator">+</span>
            <span class="token string">&apos;memo(forwardRef(...)).&apos;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> render <span class="token operator">!==</span> <span class="token string">&apos;function&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">error</span><span class="token punctuation">(</span>
          <span class="token string">&apos;forwardRef requires a render function but was given %s.&apos;</span><span class="token punctuation">,</span>
          render <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">&apos;null&apos;</span> <span class="token operator">:</span> <span class="token keyword">typeof</span> render
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>render<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> render<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">error</span><span class="token punctuation">(</span>
            <span class="token string">&apos;forwardRef render functions accept exactly two parameters: props and ref. %s&apos;</span><span class="token punctuation">,</span>
            render<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span>
              <span class="token operator">?</span> <span class="token string">&apos;Did you forget to use the ref parameter?&apos;</span>
              <span class="token operator">:</span> <span class="token string">&apos;Any additional parameter will be undefined.&apos;</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>render <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>render<span class="token punctuation">.</span>defaultProps <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">||</span> render<span class="token punctuation">.</span>propTypes <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">error</span><span class="token punctuation">(</span>
            <span class="token string">&apos;forwardRef render functions do not support propTypes or defaultProps. &apos;</span> <span class="token operator">+</span>
              <span class="token string">&apos;Did you accidentally pass a React component?&apos;</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> elementType <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span><span class="token operator">%</span> endmath <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span><span class="token operator">:</span> <span class="token constant">REACT_FORWARD_REF_TYPE</span><span class="token punctuation">,</span>
      render<span class="token operator">:</span> render<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token punctuation">{</span>
      <span class="token keyword">var</span> ownName<span class="token punctuation">;</span>
      Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>elementType<span class="token punctuation">,</span> <span class="token string">&apos;displayName&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> ownName<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          ownName <span class="token operator">=</span> name<span class="token punctuation">;</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span>render<span class="token punctuation">.</span>displayName <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            render<span class="token punctuation">.</span>displayName <span class="token operator">=</span> name<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> elementType<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Filter certain DOM attributes (e.g. src, href) if their values are empty strings.</span>

  <span class="token keyword">var</span> enableScopeAPI <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// Experimental Create Event Handle API.</span>

  <span class="token keyword">function</span> <span class="token function">isValidElementType</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">&apos;string&apos;</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">// Note: typeof might be other than &apos;symbol&apos; or &apos;number&apos; (e.g. if it&apos;s a polyfill).</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      type <span class="token operator">===</span> exports<span class="token punctuation">.</span>Fragment <span class="token operator">||</span>
      type <span class="token operator">===</span> exports<span class="token punctuation">.</span>Profiler <span class="token operator">||</span>
      type <span class="token operator">===</span> <span class="token constant">REACT_DEBUG_TRACING_MODE_TYPE</span> <span class="token operator">||</span>
      type <span class="token operator">===</span> exports<span class="token punctuation">.</span>StrictMode <span class="token operator">||</span>
      type <span class="token operator">===</span> exports<span class="token punctuation">.</span>Suspense <span class="token operator">||</span>
      type <span class="token operator">===</span> <span class="token constant">REACT_SUSPENSE_LIST_TYPE</span> <span class="token operator">||</span>
      type <span class="token operator">===</span> <span class="token constant">REACT_LEGACY_HIDDEN_TYPE</span> <span class="token operator">||</span>
      enableScopeAPI
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">&apos;object&apos;</span> <span class="token operator">&amp;&amp;</span> type <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        type<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token operator">%</span> math <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span> <span class="token operator">===</span> <span class="token constant">REACT_LAZY_TYPE</span> <span class="token operator">||</span>
        type<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token operator">%</span> endmath <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span> <span class="token operator">===</span> <span class="token constant">REACT_MEMO_TYPE</span> <span class="token operator">||</span>
        type<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token operator">%</span> math <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span> <span class="token operator">===</span> <span class="token constant">REACT_PROVIDER_TYPE</span> <span class="token operator">||</span>
        type<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token operator">%</span> endmath <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span> <span class="token operator">===</span> <span class="token constant">REACT_CONTEXT_TYPE</span> <span class="token operator">||</span>
        type<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token operator">%</span> math <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span> <span class="token operator">===</span> <span class="token constant">REACT_FORWARD_REF_TYPE</span> <span class="token operator">||</span>
        type<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token operator">%</span> endmath <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span> <span class="token operator">===</span> <span class="token constant">REACT_FUNDAMENTAL_TYPE</span> <span class="token operator">||</span>
        type<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token operator">%</span> math <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span> <span class="token operator">===</span> <span class="token constant">REACT_BLOCK_TYPE</span> <span class="token operator">||</span>
        type<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token constant">REACT_SERVER_BLOCK_TYPE</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> compare</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isValidElementType</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">error</span><span class="token punctuation">(</span>
          <span class="token string">&apos;memo: The first argument must be a component. Instead &apos;</span> <span class="token operator">+</span>
            <span class="token string">&apos;received: %s&apos;</span><span class="token punctuation">,</span>
          type <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">&apos;null&apos;</span> <span class="token operator">:</span> <span class="token keyword">typeof</span> type
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> elementType <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span><span class="token operator">%</span> endmath <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span><span class="token operator">:</span> <span class="token constant">REACT_MEMO_TYPE</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> type<span class="token punctuation">,</span>
      compare<span class="token operator">:</span> compare <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> compare<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token punctuation">{</span>
      <span class="token keyword">var</span> ownName<span class="token punctuation">;</span>
      Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>elementType<span class="token punctuation">,</span> <span class="token string">&apos;displayName&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> ownName<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          ownName <span class="token operator">=</span> name<span class="token punctuation">;</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span>type<span class="token punctuation">.</span>displayName <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            type<span class="token punctuation">.</span>displayName <span class="token operator">=</span> name<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> elementType<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">resolveDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> dispatcher <span class="token operator">=</span> ReactCurrentDispatcher<span class="token punctuation">.</span>current<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>dispatcher <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span>
          <span class="token string">&apos;Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.&apos;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dispatcher<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">useContext</span><span class="token punctuation">(</span><span class="token parameter">Context<span class="token punctuation">,</span> unstable_observedBits</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> dispatcher <span class="token operator">=</span> <span class="token function">resolveDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>unstable_observedBits <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">error</span><span class="token punctuation">(</span>
          <span class="token string">&apos;useContext() second argument is reserved for future &apos;</span> <span class="token operator">+</span>
            <span class="token string">&apos;use in React. Passing it is not supported. &apos;</span> <span class="token operator">+</span>
            <span class="token string">&apos;You passed: %s.%s&apos;</span><span class="token punctuation">,</span>
          unstable_observedBits<span class="token punctuation">,</span>
          <span class="token keyword">typeof</span> unstable_observedBits <span class="token operator">===</span> <span class="token string">&apos;number&apos;</span> <span class="token operator">&amp;&amp;</span>
            Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token operator">?</span> <span class="token string">&apos;\n\nDid you call array.map(useContext)? &apos;</span> <span class="token operator">+</span>
                <span class="token string">&apos;Calling Hooks inside a loop is not supported. &apos;</span> <span class="token operator">+</span>
                <span class="token string">&apos;Learn more at https://reactjs.org/link/rules-of-hooks&apos;</span>
            <span class="token operator">:</span> <span class="token string">&apos;&apos;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token comment">// TODO: add a more generic warning for invalid values.</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>Context<span class="token punctuation">.</span>_context <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> realContext <span class="token operator">=</span> Context<span class="token punctuation">.</span>_context<span class="token punctuation">;</span> <span class="token comment">// Don&apos;t deduplicate because this legitimately causes bugs</span>
        <span class="token comment">// and nobody should be using this in existing code.</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>realContext<span class="token punctuation">.</span>Consumer <span class="token operator">===</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">error</span><span class="token punctuation">(</span>
            <span class="token string">&apos;Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be &apos;</span> <span class="token operator">+</span>
              <span class="token string">&apos;removed in a future major release. Did you mean to call useContext(Context) instead?&apos;</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>realContext<span class="token punctuation">.</span>Provider <span class="token operator">===</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">error</span><span class="token punctuation">(</span>
            <span class="token string">&apos;Calling useContext(Context.Provider) is not supported. &apos;</span> <span class="token operator">+</span>
              <span class="token string">&apos;Did you mean to call useContext(Context) instead?&apos;</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> dispatcher<span class="token punctuation">.</span><span class="token function">useContext</span><span class="token punctuation">(</span>Context<span class="token punctuation">,</span> unstable_observedBits<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token parameter">initialState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> dispatcher <span class="token operator">=</span> <span class="token function">resolveDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dispatcher<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span>initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">useReducer</span><span class="token punctuation">(</span><span class="token parameter">reducer<span class="token punctuation">,</span> initialArg<span class="token punctuation">,</span> init</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> dispatcher <span class="token operator">=</span> <span class="token function">resolveDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dispatcher<span class="token punctuation">.</span><span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialArg<span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token parameter">initialValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> dispatcher <span class="token operator">=</span> <span class="token function">resolveDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dispatcher<span class="token punctuation">.</span><span class="token function">useRef</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token parameter">create<span class="token punctuation">,</span> deps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> dispatcher <span class="token operator">=</span> <span class="token function">resolveDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dispatcher<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span>create<span class="token punctuation">,</span> deps<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">useLayoutEffect</span><span class="token punctuation">(</span><span class="token parameter">create<span class="token punctuation">,</span> deps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> dispatcher <span class="token operator">=</span> <span class="token function">resolveDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dispatcher<span class="token punctuation">.</span><span class="token function">useLayoutEffect</span><span class="token punctuation">(</span>create<span class="token punctuation">,</span> deps<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> deps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> dispatcher <span class="token operator">=</span> <span class="token function">resolveDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dispatcher<span class="token punctuation">.</span><span class="token function">useCallback</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> deps<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token parameter">create<span class="token punctuation">,</span> deps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> dispatcher <span class="token operator">=</span> <span class="token function">resolveDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dispatcher<span class="token punctuation">.</span><span class="token function">useMemo</span><span class="token punctuation">(</span>create<span class="token punctuation">,</span> deps<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">useImperativeHandle</span><span class="token punctuation">(</span><span class="token parameter">ref<span class="token punctuation">,</span> create<span class="token punctuation">,</span> deps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> dispatcher <span class="token operator">=</span> <span class="token function">resolveDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dispatcher<span class="token punctuation">.</span><span class="token function">useImperativeHandle</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> create<span class="token punctuation">,</span> deps<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">useDebugValue</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> formatterFn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">var</span> dispatcher <span class="token operator">=</span> <span class="token function">resolveDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> dispatcher<span class="token punctuation">.</span><span class="token function">useDebugValue</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> formatterFn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Helpers to patch console.logs to avoid logging during side-effect free</span>
  <span class="token comment">// replaying on render function. This currently only patches the object</span>
  <span class="token comment">// lazily which won&apos;t cover if the log function was extracted eagerly.</span>
  <span class="token comment">// We could also eagerly patch the method.</span>
  <span class="token keyword">var</span> disabledDepth <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> prevLog<span class="token punctuation">;</span>
  <span class="token keyword">var</span> prevInfo<span class="token punctuation">;</span>
  <span class="token keyword">var</span> prevWarn<span class="token punctuation">;</span>
  <span class="token keyword">var</span> prevError<span class="token punctuation">;</span>
  <span class="token keyword">var</span> prevGroup<span class="token punctuation">;</span>
  <span class="token keyword">var</span> prevGroupCollapsed<span class="token punctuation">;</span>
  <span class="token keyword">var</span> prevGroupEnd<span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">disabledLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  disabledLog<span class="token punctuation">.</span>__reactDisabledLog <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">disableLogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>disabledDepth <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* eslint-disable react-internal/no-production-logging */</span>
        prevLog <span class="token operator">=</span> console<span class="token punctuation">.</span>log<span class="token punctuation">;</span>
        prevInfo <span class="token operator">=</span> console<span class="token punctuation">.</span>info<span class="token punctuation">;</span>
        prevWarn <span class="token operator">=</span> console<span class="token punctuation">.</span>warn<span class="token punctuation">;</span>
        prevError <span class="token operator">=</span> console<span class="token punctuation">.</span>error<span class="token punctuation">;</span>
        prevGroup <span class="token operator">=</span> console<span class="token punctuation">.</span>group<span class="token punctuation">;</span>
        prevGroupCollapsed <span class="token operator">=</span> console<span class="token punctuation">.</span>groupCollapsed<span class="token punctuation">;</span>
        prevGroupEnd <span class="token operator">=</span> console<span class="token punctuation">.</span>groupEnd<span class="token punctuation">;</span> <span class="token comment">// https://github.com/facebook/react/issues/19099</span>

        <span class="token keyword">var</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
          configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          value<span class="token operator">:</span> disabledLog<span class="token punctuation">,</span>
          writable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// $FlowFixMe Flow thinks console is immutable.</span>

        Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>console<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          info<span class="token operator">:</span> props<span class="token punctuation">,</span>
          log<span class="token operator">:</span> props<span class="token punctuation">,</span>
          warn<span class="token operator">:</span> props<span class="token punctuation">,</span>
          error<span class="token operator">:</span> props<span class="token punctuation">,</span>
          group<span class="token operator">:</span> props<span class="token punctuation">,</span>
          groupCollapsed<span class="token operator">:</span> props<span class="token punctuation">,</span>
          groupEnd<span class="token operator">:</span> props<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* eslint-enable react-internal/no-production-logging */</span>
      <span class="token punctuation">}</span>

      disabledDepth<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">reenableLogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      disabledDepth<span class="token operator">--</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>disabledDepth <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* eslint-disable react-internal/no-production-logging */</span>
        <span class="token keyword">var</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
          configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          writable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// $FlowFixMe Flow thinks console is immutable.</span>

        Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>console<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          log<span class="token operator">:</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> props<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> prevLog<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          info<span class="token operator">:</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> props<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> prevInfo<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          warn<span class="token operator">:</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> props<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> prevWarn<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          error<span class="token operator">:</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> props<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> prevError<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          group<span class="token operator">:</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> props<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> prevGroup<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          groupCollapsed<span class="token operator">:</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> props<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> prevGroupCollapsed<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          groupEnd<span class="token operator">:</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> props<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> prevGroupEnd<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* eslint-enable react-internal/no-production-logging */</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>disabledDepth <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">error</span><span class="token punctuation">(</span>
          <span class="token string">&apos;disabledDepth fell below zero. &apos;</span> <span class="token operator">+</span>
            <span class="token string">&apos;This is a bug in React. Please file an issue.&apos;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> ReactCurrentDispatcher$<span class="token number">1</span> <span class="token operator">=</span> ReactSharedInternals<span class="token punctuation">.</span>ReactCurrentDispatcher<span class="token punctuation">;</span>
  <span class="token keyword">var</span> prefix<span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">describeBuiltInComponentFrame</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> source<span class="token punctuation">,</span> ownerFn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>prefix <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Extract the VM specific prefix used by each line.</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> match <span class="token operator">=</span> x<span class="token punctuation">.</span>stack<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\n( *(at )?)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          prefix <span class="token operator">=</span> <span class="token punctuation">(</span>match <span class="token operator">&amp;&amp;</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token comment">// We use the prefix to ensure our stacks line up with native stack frames.</span>

      <span class="token keyword">return</span> <span class="token string">&apos;\n&apos;</span> <span class="token operator">+</span> prefix <span class="token operator">+</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> reentry <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> componentFrameCache<span class="token punctuation">;</span>

  <span class="token punctuation">{</span>
    <span class="token keyword">var</span> PossiblyWeakMap <span class="token operator">=</span> <span class="token keyword">typeof</span> WeakMap <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span> <span class="token operator">?</span> WeakMap <span class="token operator">:</span> Map<span class="token punctuation">;</span>
    componentFrameCache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PossiblyWeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">describeNativeComponentFrame</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> construct</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If something asked for a stack inside a fake render, it should get ignored.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fn <span class="token operator">||</span> reentry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">{</span>
      <span class="token keyword">var</span> frame <span class="token operator">=</span> componentFrameCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>frame <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> frame<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> control<span class="token punctuation">;</span>
    reentry <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> previousPrepareStackTrace <span class="token operator">=</span> Error<span class="token punctuation">.</span>prepareStackTrace<span class="token punctuation">;</span> <span class="token comment">// $FlowFixMe It does accept undefined.</span>

    Error<span class="token punctuation">.</span>prepareStackTrace <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> previousDispatcher<span class="token punctuation">;</span>

    <span class="token punctuation">{</span>
      previousDispatcher <span class="token operator">=</span> ReactCurrentDispatcher$<span class="token number">1.</span>current<span class="token punctuation">;</span> <span class="token comment">// Set the dispatcher in DEV because this might be call in the render function</span>
      <span class="token comment">// for warnings.</span>

      ReactCurrentDispatcher$<span class="token number">1.</span>current <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token function">disableLogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// This should throw.</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>construct<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Something should be setting the props in the constructor.</span>
        <span class="token keyword">var</span> <span class="token function-variable function">Fake</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// $FlowFixMe</span>

        Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token class-name">Fake</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">&apos;props&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// We use a throwing setter instead of frozen or non-writable props</span>
            <span class="token comment">// because that won&apos;t throw in a non-strict mode function.</span>
            <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> Reflect <span class="token operator">===</span> <span class="token string">&apos;object&apos;</span> <span class="token operator">&amp;&amp;</span> Reflect<span class="token punctuation">.</span>construct<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// We construct a different control for this case to include any extra</span>
          <span class="token comment">// frames added by the construct call.</span>
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            Reflect<span class="token punctuation">.</span><span class="token function">construct</span><span class="token punctuation">(</span>Fake<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            control <span class="token operator">=</span> x<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          Reflect<span class="token punctuation">.</span><span class="token function">construct</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Fake<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">Fake</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            control <span class="token operator">=</span> x<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token class-name">Fake</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          control <span class="token operator">=</span> x<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>sample<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// This is inlined manually because closure doesn&apos;t do it for us.</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>sample <span class="token operator">&amp;&amp;</span> control <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> sample<span class="token punctuation">.</span>stack <span class="token operator">===</span> <span class="token string">&apos;string&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// This extracts the first frame from the sample that isn&apos;t also in the control.</span>
        <span class="token comment">// Skipping one frame that we assume is the frame that calls the two.</span>
        <span class="token keyword">var</span> sampleLines <span class="token operator">=</span> sample<span class="token punctuation">.</span>stack<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&apos;\n&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> controlLines <span class="token operator">=</span> control<span class="token punctuation">.</span>stack<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&apos;\n&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> s <span class="token operator">=</span> sampleLines<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> c <span class="token operator">=</span> controlLines<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span>s <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> sampleLines<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">!==</span> controlLines<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// We expect at least one stack frame to be shared.</span>
          <span class="token comment">// Typically this will be the root most one. However, stack frames may be</span>
          <span class="token comment">// cut off due to maximum stack limits. In this case, one maybe cut off</span>
          <span class="token comment">// earlier than the other. We assume that the sample is longer or the same</span>
          <span class="token comment">// and there for cut off earlier. So we should find the root most frame in</span>
          <span class="token comment">// the sample somewhere in the control.</span>
          c<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> s <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> s<span class="token operator">--</span><span class="token punctuation">,</span> c<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// Next we find the first one that isn&apos;t the same which should be the</span>
          <span class="token comment">// frame that called our sample function and the control.</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>sampleLines<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">!==</span> controlLines<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// In V8, the first line is describing the message but other VMs don&apos;t.</span>
            <span class="token comment">// If we&apos;re about to return the first line, and the control is also on the same</span>
            <span class="token comment">// line, that&apos;s a pretty good indicator that our sample threw at same line as</span>
            <span class="token comment">// the control. I.e. before we entered the sample frame. So we ignore this result.</span>
            <span class="token comment">// This can happen if you passed a class to function component, or non-function.</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>s <span class="token operator">!==</span> <span class="token number">1</span> <span class="token operator">||</span> c <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">do</span> <span class="token punctuation">{</span>
                s<span class="token operator">--</span><span class="token punctuation">;</span>
                c<span class="token operator">--</span><span class="token punctuation">;</span> <span class="token comment">// We may still have similar intermediate frames from the construct call.</span>
                <span class="token comment">// The next one that isn&apos;t the same should be our match though.</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> sampleLines<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">!==</span> controlLines<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token comment">// V8 adds a &quot;new&quot; prefix for native classes. Let&apos;s remove it to make it prettier.</span>
                  <span class="token keyword">var</span> _frame <span class="token operator">=</span>
                    <span class="token string">&apos;\n&apos;</span> <span class="token operator">+</span> sampleLines<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&apos; at new &apos;</span><span class="token punctuation">,</span> <span class="token string">&apos; at &apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                  <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> fn <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                      componentFrameCache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> _frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                  <span class="token punctuation">}</span> <span class="token comment">// Return the line we found.</span>

                  <span class="token keyword">return</span> _frame<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>s <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">break</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      reentry <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

      <span class="token punctuation">{</span>
        ReactCurrentDispatcher$<span class="token number">1.</span>current <span class="token operator">=</span> previousDispatcher<span class="token punctuation">;</span>
        <span class="token function">reenableLogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      Error<span class="token punctuation">.</span>prepareStackTrace <span class="token operator">=</span> previousPrepareStackTrace<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">// Fallback to just using the name if we couldn&apos;t make it throw.</span>

    <span class="token keyword">var</span> name <span class="token operator">=</span> fn <span class="token operator">?</span> fn<span class="token punctuation">.</span>displayName <span class="token operator">||</span> fn<span class="token punctuation">.</span>name <span class="token operator">:</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> syntheticFrame <span class="token operator">=</span> name <span class="token operator">?</span> <span class="token function">describeBuiltInComponentFrame</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>

    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> fn <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        componentFrameCache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> syntheticFrame<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> syntheticFrame<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">describeFunctionComponentFrame</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> source<span class="token punctuation">,</span> ownerFn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">describeNativeComponentFrame</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">shouldConstruct</span><span class="token punctuation">(</span><span class="token parameter">Component</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> prototype <span class="token operator">=</span> <span class="token class-name">Component</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>prototype <span class="token operator">&amp;&amp;</span> prototype<span class="token punctuation">.</span>isReactComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">describeUnknownElementTypeFrameInDEV</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> source<span class="token punctuation">,</span> ownerFn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">describeNativeComponentFrame</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token function">shouldConstruct</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">&apos;string&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">describeBuiltInComponentFrame</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> exports<span class="token punctuation">.</span>Suspense<span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token function">describeBuiltInComponentFrame</span><span class="token punctuation">(</span><span class="token string">&apos;Suspense&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">case</span> <span class="token constant">REACT_SUSPENSE_LIST_TYPE</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token function">describeBuiltInComponentFrame</span><span class="token punctuation">(</span><span class="token string">&apos;SuspenseList&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">&apos;object&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token operator">%</span> math <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token constant">REACT_FORWARD_REF_TYPE</span><span class="token operator">:</span>
          <span class="token keyword">return</span> <span class="token function">describeFunctionComponentFrame</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span>render<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">case</span> <span class="token constant">REACT_MEMO_TYPE</span><span class="token operator">:</span>
          <span class="token comment">// Memo may contain any component type so we recursively resolve it.</span>
          <span class="token keyword">return</span> <span class="token function">describeUnknownElementTypeFrameInDEV</span><span class="token punctuation">(</span>
            type<span class="token punctuation">.</span>type<span class="token punctuation">,</span>
            source<span class="token punctuation">,</span>
            ownerFn
          <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">case</span> <span class="token constant">REACT_BLOCK_TYPE</span><span class="token operator">:</span>
          <span class="token keyword">return</span> <span class="token function">describeFunctionComponentFrame</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span>_render<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">case</span> <span class="token constant">REACT_LAZY_TYPE</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> lazyComponent <span class="token operator">=</span> type<span class="token punctuation">;</span>
          <span class="token keyword">var</span> payload <span class="token operator">=</span> lazyComponent<span class="token punctuation">.</span>_payload<span class="token punctuation">;</span>
          <span class="token keyword">var</span> init <span class="token operator">=</span> lazyComponent<span class="token punctuation">.</span>_init<span class="token punctuation">;</span>

          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// Lazy may contain any component type so we recursively resolve it.</span>
            <span class="token keyword">return</span> <span class="token function">describeUnknownElementTypeFrameInDEV</span><span class="token punctuation">(</span>
              <span class="token function">init</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">,</span>
              source<span class="token punctuation">,</span>
              ownerFn
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> loggedTypeFailures <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> ReactDebugCurrentFrame$<span class="token number">1</span> <span class="token operator">=</span> ReactSharedInternals<span class="token punctuation">.</span>ReactDebugCurrentFrame<span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">setCurrentlyValidatingElement</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> owner <span class="token operator">=</span> element<span class="token punctuation">.</span>_owner<span class="token punctuation">;</span>
        <span class="token keyword">var</span> stack <span class="token operator">=</span> <span class="token function">describeUnknownElementTypeFrameInDEV</span><span class="token punctuation">(</span>
          element<span class="token punctuation">.</span>type<span class="token punctuation">,</span>
          element<span class="token punctuation">.</span>_source<span class="token punctuation">,</span>
          owner <span class="token operator">?</span> owner<span class="token punctuation">.</span>type <span class="token operator">:</span> <span class="token keyword">null</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        ReactDebugCurrentFrame$<span class="token number">1.</span><span class="token function">setExtraStackFrame</span><span class="token punctuation">(</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        ReactDebugCurrentFrame$<span class="token number">1.</span><span class="token function">setExtraStackFrame</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">checkPropTypes</span><span class="token punctuation">(</span><span class="token parameter">typeSpecs<span class="token punctuation">,</span> values<span class="token punctuation">,</span> location<span class="token punctuation">,</span> componentName<span class="token punctuation">,</span> element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// $FlowFixMe This is okay but Flow doesn&apos;t know it.</span>
      <span class="token keyword">var</span> has <span class="token operator">=</span> Function<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>hasOwnProperty<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> typeSpecName <span class="token keyword">in</span> typeSpecs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">has</span><span class="token punctuation">(</span>typeSpecs<span class="token punctuation">,</span> typeSpecName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> error$<span class="token number">1</span> <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// Prop type validation may throw. In case they do, we don&apos;t want to</span>
          <span class="token comment">// fail the render phase where it didn&apos;t fail before. So we log it.</span>
          <span class="token comment">// After these have been cleaned up, we&apos;ll let them throw.</span>

          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// This is intentionally an invariant that gets caught. It&apos;s the same</span>
            <span class="token comment">// behavior as without this statement except with a better message.</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> typeSpecs<span class="token punctuation">[</span>typeSpecName<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">&apos;function&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">var</span> err <span class="token operator">=</span> <span class="token function">Error</span><span class="token punctuation">(</span>
                <span class="token punctuation">(</span>componentName <span class="token operator">||</span> <span class="token string">&apos;React class&apos;</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                  <span class="token string">&apos;: &apos;</span> <span class="token operator">+</span>
                  location <span class="token operator">+</span>
                  <span class="token string">&apos; type `&apos;</span> <span class="token operator">+</span>
                  typeSpecName <span class="token operator">+</span>
                  <span class="token string">&apos;` is invalid; &apos;</span> <span class="token operator">+</span>
                  <span class="token string">&apos;it must be a function, usually from the `prop-types` package, but received `&apos;</span> <span class="token operator">+</span>
                  <span class="token keyword">typeof</span> typeSpecs<span class="token punctuation">[</span>typeSpecName<span class="token punctuation">]</span> <span class="token operator">+</span>
                  <span class="token string">&apos;`.&apos;</span> <span class="token operator">+</span>
                  <span class="token string">&apos;This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.&apos;</span>
              <span class="token punctuation">)</span><span class="token punctuation">;</span>
              err<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&apos;Invariant Violation&apos;</span><span class="token punctuation">;</span>
              <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            error$<span class="token number">1</span> <span class="token operator">=</span> typeSpecs<span class="token punctuation">[</span>typeSpecName<span class="token punctuation">]</span><span class="token punctuation">(</span>
              values<span class="token punctuation">,</span>
              typeSpecName<span class="token punctuation">,</span>
              componentName<span class="token punctuation">,</span>
              location<span class="token punctuation">,</span>
              <span class="token keyword">null</span><span class="token punctuation">,</span>
              <span class="token string">&apos;SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED&apos;</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            error$<span class="token number">1</span> <span class="token operator">=</span> ex<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span>error$<span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>error$<span class="token number">1</span> <span class="token keyword">instanceof</span> <span class="token class-name">Error</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">setCurrentlyValidatingElement</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">error</span><span class="token punctuation">(</span>
              <span class="token string">&apos;%s: type specification of %s&apos;</span> <span class="token operator">+</span>
                <span class="token string">&apos; `%s` is invalid; the type checker &apos;</span> <span class="token operator">+</span>
                <span class="token string">&apos;function must return `null` or an `Error` but returned a %s. &apos;</span> <span class="token operator">+</span>
                <span class="token string">&apos;You may have forgotten to pass an argument to the type checker &apos;</span> <span class="token operator">+</span>
                <span class="token string">&apos;creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and &apos;</span> <span class="token operator">+</span>
                <span class="token string">&apos;shape all require an argument).&apos;</span><span class="token punctuation">,</span>
              componentName <span class="token operator">||</span> <span class="token string">&apos;React class&apos;</span><span class="token punctuation">,</span>
              location<span class="token punctuation">,</span>
              typeSpecName<span class="token punctuation">,</span>
              <span class="token keyword">typeof</span> error$<span class="token number">1</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">setCurrentlyValidatingElement</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span>
            error$<span class="token number">1</span> <span class="token keyword">instanceof</span> <span class="token class-name">Error</span> <span class="token operator">&amp;&amp;</span>
            <span class="token operator">!</span><span class="token punctuation">(</span>error$<span class="token number">1.</span>message <span class="token keyword">in</span> loggedTypeFailures<span class="token punctuation">)</span>
          <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Only monitor this failure once because there tends to be a lot of the</span>
            <span class="token comment">// same error.</span>
            loggedTypeFailures<span class="token punctuation">[</span>error$<span class="token number">1.</span>message<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token function">setCurrentlyValidatingElement</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&apos;Failed %s type: %s&apos;</span><span class="token punctuation">,</span> location<span class="token punctuation">,</span> error$<span class="token number">1.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">setCurrentlyValidatingElement</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">setCurrentlyValidatingElement$1</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> owner <span class="token operator">=</span> element<span class="token punctuation">.</span>_owner<span class="token punctuation">;</span>
        <span class="token keyword">var</span> stack <span class="token operator">=</span> <span class="token function">describeUnknownElementTypeFrameInDEV</span><span class="token punctuation">(</span>
          element<span class="token punctuation">.</span>type<span class="token punctuation">,</span>
          element<span class="token punctuation">.</span>_source<span class="token punctuation">,</span>
          owner <span class="token operator">?</span> owner<span class="token punctuation">.</span>type <span class="token operator">:</span> <span class="token keyword">null</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setExtraStackFrame</span><span class="token punctuation">(</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">setExtraStackFrame</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> propTypesMisspellWarningShown<span class="token punctuation">;</span>

  <span class="token punctuation">{</span>
    propTypesMisspellWarningShown <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">getDeclarationErrorAddendum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ReactCurrentOwner<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token function">getComponentName</span><span class="token punctuation">(</span>ReactCurrentOwner<span class="token punctuation">.</span>current<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&apos;\n\nCheck the render method of `&apos;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&apos;`.&apos;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">getSourceInfoErrorAddendum</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>source <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> fileName <span class="token operator">=</span> source<span class="token punctuation">.</span>fileName<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^.*[\\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> lineNumber <span class="token operator">=</span> source<span class="token punctuation">.</span>lineNumber<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token string">&apos;\n\nCheck your code at &apos;</span> <span class="token operator">+</span> fileName <span class="token operator">+</span> <span class="token string">&apos;:&apos;</span> <span class="token operator">+</span> lineNumber <span class="token operator">+</span> <span class="token string">&apos;.&apos;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">getSourceInfoErrorAddendumForProps</span><span class="token punctuation">(</span><span class="token parameter">elementProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>elementProps <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> elementProps <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">getSourceInfoErrorAddendum</span><span class="token punctuation">(</span>elementProps<span class="token punctuation">.</span>__source<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * Warn if there&apos;s no key explicitly set on dynamic arrays of children or
   * object keys are not valid. This allows us to keep track of children between
   * updates.
   */</span>

  <span class="token keyword">var</span> ownerHasKeyUseWarning <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">getCurrentComponentErrorInfo</span><span class="token punctuation">(</span><span class="token parameter">parentType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> info <span class="token operator">=</span> <span class="token function">getDeclarationErrorAddendum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>info<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> parentName <span class="token operator">=</span>
        <span class="token keyword">typeof</span> parentType <span class="token operator">===</span> <span class="token string">&apos;string&apos;</span>
          <span class="token operator">?</span> parentType
          <span class="token operator">:</span> parentType<span class="token punctuation">.</span>displayName <span class="token operator">||</span> parentType<span class="token punctuation">.</span>name<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>parentName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        info <span class="token operator">=</span>
          <span class="token string">&apos;\n\nCheck the top-level render call using &lt;&apos;</span> <span class="token operator">+</span> parentName <span class="token operator">+</span> <span class="token string">&apos;&gt;.&apos;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> info<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * Warn if the element doesn&apos;t have an explicit key assigned to it.
   * This element is in an array. The array could grow and shrink or be
   * reordered. All children that haven&apos;t already been validated are required to
   * have a &quot;key&quot; property assigned to it. Error statuses are cached so a warning
   * will only be shown once.
   *
   * @internal
   * @param {ReactElement} element Element that requires a key.
   * @param {*} parentType element&apos;s parent&apos;s type.
   */</span>

  <span class="token keyword">function</span> <span class="token function">validateExplicitKey</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> parentType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>element<span class="token punctuation">.</span>_store <span class="token operator">||</span> element<span class="token punctuation">.</span>_store<span class="token punctuation">.</span>validated <span class="token operator">||</span> element<span class="token punctuation">.</span>key <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    element<span class="token punctuation">.</span>_store<span class="token punctuation">.</span>validated <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> currentComponentErrorInfo <span class="token operator">=</span> <span class="token function">getCurrentComponentErrorInfo</span><span class="token punctuation">(</span>parentType<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>ownerHasKeyUseWarning<span class="token punctuation">[</span>currentComponentErrorInfo<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    ownerHasKeyUseWarning<span class="token punctuation">[</span>currentComponentErrorInfo<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// Usually the current owner is the offender, but if it accepts children as a</span>
    <span class="token comment">// property, it may be the creator of the child that&apos;s responsible for</span>
    <span class="token comment">// assigning it a key.</span>

    <span class="token keyword">var</span> childOwner <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      element <span class="token operator">&amp;&amp;</span>
      element<span class="token punctuation">.</span>_owner <span class="token operator">&amp;&amp;</span>
      element<span class="token punctuation">.</span>_owner <span class="token operator">!==</span> ReactCurrentOwner<span class="token punctuation">.</span>current
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Give the component that originally created this child.</span>
      childOwner <span class="token operator">=</span>
        <span class="token string">&apos; It was passed a child from &apos;</span> <span class="token operator">+</span>
        <span class="token function">getComponentName</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>_owner<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token operator">+</span>
        <span class="token string">&apos;.&apos;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">{</span>
      <span class="token function">setCurrentlyValidatingElement$1</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">error</span><span class="token punctuation">(</span>
        <span class="token string">&apos;Each child in a list should have a unique &quot;key&quot; prop.&apos;</span> <span class="token operator">+</span>
          <span class="token string">&apos;%s%s See https://reactjs.org/link/warning-keys for more information.&apos;</span><span class="token punctuation">,</span>
        currentComponentErrorInfo<span class="token punctuation">,</span>
        childOwner
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">setCurrentlyValidatingElement$1</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * Ensure that every element either is passed in a static location, in an
   * array with an explicit keys property defined, or in an object literal
   * with valid key property.
   *
   * @internal
   * @param {ReactNode} node Statically passed child of any type.
   * @param {*} parentType node&apos;s parent&apos;s type.
   */</span>

  <span class="token keyword">function</span> <span class="token function">validateChildKeys</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> parentType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> node <span class="token operator">!==</span> <span class="token string">&apos;object&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> node<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> child <span class="token operator">=</span> node<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">validateExplicitKey</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> parentType<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// This element was passed in a valid location.</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>_store<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        node<span class="token punctuation">.</span>_store<span class="token punctuation">.</span>validated <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> iteratorFn <span class="token operator">=</span> <span class="token function">getIteratorFn</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> iteratorFn <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Entry iterators used to provide implicit keys,</span>
        <span class="token comment">// but now we print a separate warning for them later.</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>iteratorFn <span class="token operator">!==</span> node<span class="token punctuation">.</span>entries<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> iterator <span class="token operator">=</span> <span class="token function">iteratorFn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">var</span> step<span class="token punctuation">;</span>

          <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>step <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span>step<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">validateExplicitKey</span><span class="token punctuation">(</span>step<span class="token punctuation">.</span>value<span class="token punctuation">,</span> parentType<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * Given an element, validate that its props follow the propTypes definition,
   * provided by the type.
   *
   * @param {ReactElement} element
   */</span>

  <span class="token keyword">function</span> <span class="token function">validatePropTypes</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">var</span> type <span class="token operator">=</span> element<span class="token punctuation">.</span>type<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> type <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">&apos;string&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">var</span> propTypes<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        propTypes <span class="token operator">=</span> type<span class="token punctuation">.</span>propTypes<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>
        <span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">&apos;object&apos;</span> <span class="token operator">&amp;&amp;</span>
        <span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token operator">%</span> endmath <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span> <span class="token operator">===</span> <span class="token constant">REACT_FORWARD_REF_TYPE</span> <span class="token operator">||</span> <span class="token comment">// Note: Memo only checks outer props here.</span>
          <span class="token comment">// Inner props are checked in the reconciler.</span>
          type<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token operator">%</span> math <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span> <span class="token operator">===</span> <span class="token constant">REACT_MEMO_TYPE</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        propTypes <span class="token operator">=</span> type<span class="token punctuation">.</span>propTypes<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>propTypes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Intentionally inside to avoid triggering lazy initializers:</span>
        <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token function">getComponentName</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">checkPropTypes</span><span class="token punctuation">(</span>propTypes<span class="token punctuation">,</span> element<span class="token punctuation">.</span>props<span class="token punctuation">,</span> <span class="token string">&apos;prop&apos;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> element<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>
        type<span class="token punctuation">.</span>PropTypes <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span>
        <span class="token operator">!</span>propTypesMisspellWarningShown
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        propTypesMisspellWarningShown <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// Intentionally inside to avoid triggering lazy initializers:</span>

        <span class="token keyword">var</span> _name <span class="token operator">=</span> <span class="token function">getComponentName</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">error</span><span class="token punctuation">(</span>
          <span class="token string">&apos;Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?&apos;</span><span class="token punctuation">,</span>
          _name <span class="token operator">||</span> <span class="token string">&apos;Unknown&apos;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        <span class="token keyword">typeof</span> type<span class="token punctuation">.</span>getDefaultProps <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span> <span class="token operator">&amp;&amp;</span>
        <span class="token operator">!</span>type<span class="token punctuation">.</span>getDefaultProps<span class="token punctuation">.</span>isReactClassApproved
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">error</span><span class="token punctuation">(</span>
          <span class="token string">&apos;getDefaultProps is only used on classic React.createClass &apos;</span> <span class="token operator">+</span>
            <span class="token string">&apos;definitions. Use a static property named `defaultProps` instead.&apos;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * Given a fragment, validate that it can only be provided with fragment props
   * @param {ReactElement} fragment
   */</span>

  <span class="token keyword">function</span> <span class="token function">validateFragmentProps</span><span class="token punctuation">(</span><span class="token parameter">fragment</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">var</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>fragment<span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> keys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> key <span class="token operator">=</span> keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">!==</span> <span class="token string">&apos;children&apos;</span> <span class="token operator">&amp;&amp;</span> key <span class="token operator">!==</span> <span class="token string">&apos;key&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">setCurrentlyValidatingElement$1</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token function">error</span><span class="token punctuation">(</span>
            <span class="token string">&apos;Invalid prop `%s` supplied to `React.Fragment`. &apos;</span> <span class="token operator">+</span>
              <span class="token string">&apos;React.Fragment can only have `key` and `children` props.&apos;</span><span class="token punctuation">,</span>
            key
          <span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token function">setCurrentlyValidatingElement$1</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>fragment<span class="token punctuation">.</span>ref <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setCurrentlyValidatingElement$1</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&apos;Invalid attribute `ref` supplied to `React.Fragment`.&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">setCurrentlyValidatingElement$1</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">createElementWithValidation</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> props<span class="token punctuation">,</span> children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> validType <span class="token operator">=</span> <span class="token function">isValidElementType</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// We warn in this case but don&apos;t throw. We expect the element creation to</span>
    <span class="token comment">// succeed and there will likely be errors in render.</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>validType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> info <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        type <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span>
        <span class="token punctuation">(</span><span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">&apos;object&apos;</span> <span class="token operator">&amp;&amp;</span>
          type <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span>
          Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        info <span class="token operator">+=</span>
          <span class="token string">&apos; You likely forgot to export your component from the file &apos;</span> <span class="token operator">+</span>
          <span class="token string">&quot;it&apos;s defined in, or you might have mixed up default and named imports.&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">var</span> sourceInfo <span class="token operator">=</span> <span class="token function">getSourceInfoErrorAddendumForProps</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>sourceInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        info <span class="token operator">+=</span> sourceInfo<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        info <span class="token operator">+=</span> <span class="token function">getDeclarationErrorAddendum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">var</span> typeString<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        typeString <span class="token operator">=</span> <span class="token string">&apos;null&apos;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        typeString <span class="token operator">=</span> <span class="token string">&apos;array&apos;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> type<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token operator">%</span> endmath <span class="token operator">%</span><span class="token punctuation">}</span><span class="token keyword">typeof</span> <span class="token operator">===</span> <span class="token constant">REACT_ELEMENT_TYPE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        typeString <span class="token operator">=</span> <span class="token string">&apos;&lt;&apos;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">getComponentName</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&apos;Unknown&apos;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&apos; /&gt;&apos;</span><span class="token punctuation">;</span>
        info <span class="token operator">=</span>
          <span class="token string">&apos; Did you accidentally export a JSX literal instead of a component?&apos;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        typeString <span class="token operator">=</span> <span class="token keyword">typeof</span> type<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token punctuation">{</span>
        <span class="token function">error</span><span class="token punctuation">(</span>
          <span class="token string">&apos;React.createElement: type is invalid -- expected a string (for &apos;</span> <span class="token operator">+</span>
            <span class="token string">&apos;built-in components) or a class/function (for composite &apos;</span> <span class="token operator">+</span>
            <span class="token string">&apos;components) but got: %s.%s&apos;</span><span class="token punctuation">,</span>
          typeString<span class="token punctuation">,</span>
          info
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> element <span class="token operator">=</span> <span class="token function">createElement</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// The result can be nullish if a mock or a custom function is used.</span>
    <span class="token comment">// TODO: Drop this when these are no longer allowed as the type argument.</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>element <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> element<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">// Skip key warning if the type isn&apos;t valid since our key validation logic</span>
    <span class="token comment">// doesn&apos;t expect a non-string/function type and can throw confusing errors.</span>
    <span class="token comment">// We don&apos;t want exception behavior to differ between dev and prod.</span>
    <span class="token comment">// (Rendering will throw with a helpful message and as soon as the type is</span>
    <span class="token comment">// fixed, the key warnings will appear.)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>validType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">validateChildKeys</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> exports<span class="token punctuation">.</span>Fragment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">validateFragmentProps</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">validatePropTypes</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> element<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> didWarnAboutDeprecatedCreateFactory <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">createFactoryWithValidation</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> validatedFactory <span class="token operator">=</span> <span class="token function">createElementWithValidation</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    validatedFactory<span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>

    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>didWarnAboutDeprecatedCreateFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        didWarnAboutDeprecatedCreateFactory <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token function">warn</span><span class="token punctuation">(</span>
          <span class="token string">&apos;React.createFactory() is deprecated and will be removed in &apos;</span> <span class="token operator">+</span>
            <span class="token string">&apos;a future major release. Consider using JSX &apos;</span> <span class="token operator">+</span>
            <span class="token string">&apos;or use React.createElement() directly instead.&apos;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token comment">// Legacy hook: remove it</span>

      Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>validatedFactory<span class="token punctuation">,</span> <span class="token string">&apos;type&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">warn</span><span class="token punctuation">(</span>
            <span class="token string">&apos;Factory.type is deprecated. Access the class directly &apos;</span> <span class="token operator">+</span>
              <span class="token string">&apos;before passing it to createFactory.&apos;</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>

          Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&apos;type&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> type<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> type<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> validatedFactory<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">cloneElementWithValidation</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> props<span class="token punctuation">,</span> children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> newElement <span class="token operator">=</span> <span class="token function">cloneElement</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">validateChildKeys</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> newElement<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">validatePropTypes</span><span class="token punctuation">(</span>newElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> newElement<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> enableSchedulerDebugging <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> enableProfiling <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> requestHostCallback<span class="token punctuation">;</span>
  <span class="token keyword">var</span> requestHostTimeout<span class="token punctuation">;</span>
  <span class="token keyword">var</span> cancelHostTimeout<span class="token punctuation">;</span>
  <span class="token keyword">var</span> shouldYieldToHost<span class="token punctuation">;</span>
  <span class="token keyword">var</span> requestPaint<span class="token punctuation">;</span>
  <span class="token keyword">var</span> getCurrentTime<span class="token punctuation">;</span>
  <span class="token keyword">var</span> forceFrameRate<span class="token punctuation">;</span>
  <span class="token keyword">var</span> hasPerformanceNow <span class="token operator">=</span>
    <span class="token keyword">typeof</span> performance <span class="token operator">===</span> <span class="token string">&apos;object&apos;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> performance<span class="token punctuation">.</span>now <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>hasPerformanceNow<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> localPerformance <span class="token operator">=</span> performance<span class="token punctuation">;</span>

    <span class="token function-variable function">getCurrentTime</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> localPerformance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> localDate <span class="token operator">=</span> Date<span class="token punctuation">;</span>
    <span class="token keyword">var</span> initialTime <span class="token operator">=</span> localDate<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function-variable function">getCurrentTime</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> localDate<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> initialTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    <span class="token comment">// If Scheduler runs in a non-DOM environment, it falls back to a naive</span>
    <span class="token comment">// implementation using setTimeout.</span>
    <span class="token keyword">typeof</span> window <span class="token operator">===</span> <span class="token string">&apos;undefined&apos;</span> <span class="token operator">||</span> <span class="token comment">// Check if MessageChannel is supported, too.</span>
    <span class="token keyword">typeof</span> MessageChannel <span class="token operator">!==</span> <span class="token string">&apos;function&apos;</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If this accidentally gets imported in a non-browser environment, e.g. JavaScriptCore,</span>
    <span class="token comment">// fallback to a naive implementation.</span>
    <span class="token keyword">var</span> _callback <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> _timeoutID <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> <span class="token function-variable function">_flushCallback</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>_callback <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> currentTime <span class="token operator">=</span> <span class="token function">getCurrentTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">var</span> hasRemainingTime <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

          <span class="token function">_callback</span><span class="token punctuation">(</span>hasRemainingTime<span class="token punctuation">,</span> currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span>

          _callback <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">setTimeout</span><span class="token punctuation">(</span>_flushCallback<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function-variable function">requestHostCallback</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>_callback <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Protect against re-entrancy.</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span>requestHostCallback<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        _callback <span class="token operator">=</span> cb<span class="token punctuation">;</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span>_flushCallback<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function-variable function">requestHostTimeout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">cb<span class="token punctuation">,</span> ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      _timeoutID <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>cb<span class="token punctuation">,</span> ms<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function-variable function">cancelHostTimeout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>_timeoutID<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function-variable function">shouldYieldToHost</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    requestPaint <span class="token operator">=</span> <span class="token function-variable function">forceFrameRate</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// Capture local references to native APIs, in case a polyfill overrides them.</span>
    <span class="token keyword">var</span> _setTimeout <span class="token operator">=</span> window<span class="token punctuation">.</span>setTimeout<span class="token punctuation">;</span>
    <span class="token keyword">var</span> _clearTimeout <span class="token operator">=</span> window<span class="token punctuation">.</span>clearTimeout<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> console <span class="token operator">!==</span> <span class="token string">&apos;undefined&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// TODO: Scheduler no longer requires these methods to be polyfilled. But</span>
      <span class="token comment">// maybe we want to continue warning if they don&apos;t exist, to preserve the</span>
      <span class="token comment">// option to rely on it in the future?</span>
      <span class="token keyword">var</span> requestAnimationFrame <span class="token operator">=</span> window<span class="token punctuation">.</span>requestAnimationFrame<span class="token punctuation">;</span>
      <span class="token keyword">var</span> cancelAnimationFrame <span class="token operator">=</span> window<span class="token punctuation">.</span>cancelAnimationFrame<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> requestAnimationFrame <span class="token operator">!==</span> <span class="token string">&apos;function&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Using console[&apos;error&apos;] to evade Babel and ESLint</span>
        console<span class="token punctuation">[</span><span class="token string">&apos;error&apos;</span><span class="token punctuation">]</span><span class="token punctuation">(</span>
          <span class="token string">&quot;This browser doesn&apos;t support requestAnimationFrame. &quot;</span> <span class="token operator">+</span>
            <span class="token string">&apos;Make sure that you load a &apos;</span> <span class="token operator">+</span>
            <span class="token string">&apos;polyfill in older browsers. https://reactjs.org/link/react-polyfills&apos;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> cancelAnimationFrame <span class="token operator">!==</span> <span class="token string">&apos;function&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Using console[&apos;error&apos;] to evade Babel and ESLint</span>
        console<span class="token punctuation">[</span><span class="token string">&apos;error&apos;</span><span class="token punctuation">]</span><span class="token punctuation">(</span>
          <span class="token string">&quot;This browser doesn&apos;t support cancelAnimationFrame. &quot;</span> <span class="token operator">+</span>
            <span class="token string">&apos;Make sure that you load a &apos;</span> <span class="token operator">+</span>
            <span class="token string">&apos;polyfill in older browsers. https://reactjs.org/link/react-polyfills&apos;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> isMessageLoopRunning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> scheduledHostCallback <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> taskTimeoutID <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// Scheduler periodically yields in case there is other work on the main</span>
    <span class="token comment">// thread, like user events. By default, it yields multiple times per frame.</span>
    <span class="token comment">// It does not attempt to align with frame boundaries, since most tasks don&apos;t</span>
    <span class="token comment">// need to be frame aligned; for those that do, use requestAnimationFrame.</span>

    <span class="token keyword">var</span> yieldInterval <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> deadline <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// TODO: Make this configurable</span>

    <span class="token punctuation">{</span>
      <span class="token comment">// `isInputPending` is not available. Since we have no way of knowing if</span>
      <span class="token comment">// there&apos;s pending input, always yield at the end of the frame.</span>
      <span class="token function-variable function">shouldYieldToHost</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getCurrentTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> deadline<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// Since we yield every frame regardless, `requestPaint` has no effect.</span>

      <span class="token function-variable function">requestPaint</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function-variable function">forceFrameRate</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>fps <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> fps <span class="token operator">&gt;</span> <span class="token number">125</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Using console[&apos;error&apos;] to evade Babel and ESLint</span>
        console<span class="token punctuation">[</span><span class="token string">&apos;error&apos;</span><span class="token punctuation">]</span><span class="token punctuation">(</span>
          <span class="token string">&apos;forceFrameRate takes a positive int between 0 and 125, &apos;</span> <span class="token operator">+</span>
            <span class="token string">&apos;forcing frame rates higher than 125 fps is not supported&apos;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>fps <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        yieldInterval <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">/</span> fps<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// reset the framerate</span>
        yieldInterval <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> <span class="token function-variable function">performWorkUntilDeadline</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>scheduledHostCallback <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> currentTime <span class="token operator">=</span> <span class="token function">getCurrentTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Yield after `yieldInterval` ms, regardless of where we are in the vsync</span>
        <span class="token comment">// cycle. This means there&apos;s always time remaining at the beginning of</span>
        <span class="token comment">// the message event.</span>

        deadline <span class="token operator">=</span> currentTime <span class="token operator">+</span> yieldInterval<span class="token punctuation">;</span>
        <span class="token keyword">var</span> hasTimeRemaining <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> hasMoreWork <span class="token operator">=</span> <span class="token function">scheduledHostCallback</span><span class="token punctuation">(</span>
            hasTimeRemaining<span class="token punctuation">,</span>
            currentTime
          <span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hasMoreWork<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            isMessageLoopRunning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            scheduledHostCallback <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// If there&apos;s more work, schedule the next message event at the end</span>
            <span class="token comment">// of the preceding one.</span>
            port<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// If a scheduler task throws, exit the current browser task so the</span>
          <span class="token comment">// error can be observed.</span>
          port<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        isMessageLoopRunning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token comment">// Yielding to the browser will give it a chance to paint, so we can</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> port <span class="token operator">=</span> channel<span class="token punctuation">.</span>port2<span class="token punctuation">;</span>
    channel<span class="token punctuation">.</span>port1<span class="token punctuation">.</span>onmessage <span class="token operator">=</span> performWorkUntilDeadline<span class="token punctuation">;</span>

    <span class="token function-variable function">requestHostCallback</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      scheduledHostCallback <span class="token operator">=</span> callback<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isMessageLoopRunning<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        isMessageLoopRunning <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        port<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function-variable function">requestHostTimeout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      taskTimeoutID <span class="token operator">=</span> <span class="token function">_setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token function">getCurrentTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> ms<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function-variable function">cancelHostTimeout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">_clearTimeout</span><span class="token punctuation">(</span>taskTimeoutID<span class="token punctuation">)</span><span class="token punctuation">;</span>

      taskTimeoutID <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token parameter">heap<span class="token punctuation">,</span> node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> index <span class="token operator">=</span> heap<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    heap<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">siftUp</span><span class="token punctuation">(</span>heap<span class="token punctuation">,</span> node<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token parameter">heap</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> first <span class="token operator">=</span> heap<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> first <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> first<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token parameter">heap</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> first <span class="token operator">=</span> heap<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>first <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> last <span class="token operator">=</span> heap<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>last <span class="token operator">!==</span> first<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        heap<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> last<span class="token punctuation">;</span>
        <span class="token function">siftDown</span><span class="token punctuation">(</span>heap<span class="token punctuation">,</span> last<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> first<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">siftUp</span><span class="token punctuation">(</span><span class="token parameter">heap<span class="token punctuation">,</span> node<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> index <span class="token operator">=</span> i<span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> parentIndex <span class="token operator">=</span> <span class="token punctuation">(</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> parent <span class="token operator">=</span> heap<span class="token punctuation">[</span>parentIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token function">compare</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> node<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// The parent is larger. Swap positions.</span>
        heap<span class="token punctuation">[</span>parentIndex<span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">;</span>
        heap<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> parent<span class="token punctuation">;</span>
        index <span class="token operator">=</span> parentIndex<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// The parent is smaller. Exit.</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">siftDown</span><span class="token punctuation">(</span><span class="token parameter">heap<span class="token punctuation">,</span> node<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> index <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token keyword">var</span> length <span class="token operator">=</span> heap<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> leftIndex <span class="token operator">=</span> <span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> left <span class="token operator">=</span> heap<span class="token punctuation">[</span>leftIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> rightIndex <span class="token operator">=</span> leftIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> right <span class="token operator">=</span> heap<span class="token punctuation">[</span>rightIndex<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// If the left or right node is smaller, swap with the smaller of those.</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token function">compare</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> node<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>right <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token function">compare</span><span class="token punctuation">(</span>right<span class="token punctuation">,</span> left<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          heap<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> right<span class="token punctuation">;</span>
          heap<span class="token punctuation">[</span>rightIndex<span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">;</span>
          index <span class="token operator">=</span> rightIndex<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          heap<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> left<span class="token punctuation">;</span>
          heap<span class="token punctuation">[</span>leftIndex<span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">;</span>
          index <span class="token operator">=</span> leftIndex<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>right <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token function">compare</span><span class="token punctuation">(</span>right<span class="token punctuation">,</span> node<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        heap<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> right<span class="token punctuation">;</span>
        heap<span class="token punctuation">[</span>rightIndex<span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">;</span>
        index <span class="token operator">=</span> rightIndex<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// Neither child is smaller. Exit.</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Compare sort index first, then task id.</span>
    <span class="token keyword">var</span> diff <span class="token operator">=</span> a<span class="token punctuation">.</span>sortIndex <span class="token operator">-</span> b<span class="token punctuation">.</span>sortIndex<span class="token punctuation">;</span>
    <span class="token keyword">return</span> diff <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">?</span> diff <span class="token operator">:</span> a<span class="token punctuation">.</span>id <span class="token operator">-</span> b<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// TODO: Use symbols?</span>
  <span class="token keyword">var</span> ImmediatePriority <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> UserBlockingPriority <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> NormalPriority <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> LowPriority <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> IdlePriority <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">markTaskErrored</span><span class="token punctuation">(</span><span class="token parameter">task<span class="token punctuation">,</span> ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token comment">/* eslint-disable no-var */</span>
  <span class="token comment">// Math.pow(2, 30) - 1</span>
  <span class="token comment">// 0b111111111111111111111111111111</span>

  <span class="token keyword">var</span> maxSigned31BitInt <span class="token operator">=</span> <span class="token number">1073741823</span><span class="token punctuation">;</span> <span class="token comment">// Times out immediately</span>

  <span class="token keyword">var</span> <span class="token constant">IMMEDIATE_PRIORITY_TIMEOUT</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// Eventually times out</span>

  <span class="token keyword">var</span> <span class="token constant">USER_BLOCKING_PRIORITY_TIMEOUT</span> <span class="token operator">=</span> <span class="token number">250</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">NORMAL_PRIORITY_TIMEOUT</span> <span class="token operator">=</span> <span class="token number">5000</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">LOW_PRIORITY_TIMEOUT</span> <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span> <span class="token comment">// Never times out</span>

  <span class="token keyword">var</span> <span class="token constant">IDLE_PRIORITY_TIMEOUT</span> <span class="token operator">=</span> maxSigned31BitInt<span class="token punctuation">;</span> <span class="token comment">// Tasks are stored on a min heap</span>

  <span class="token keyword">var</span> taskQueue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> timerQueue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Incrementing id counter. Used to maintain insertion order.</span>

  <span class="token keyword">var</span> taskIdCounter <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// Pausing the scheduler is useful for debugging.</span>
  <span class="token keyword">var</span> currentTask <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> currentPriorityLevel <span class="token operator">=</span> NormalPriority<span class="token punctuation">;</span> <span class="token comment">// This is set while performing work, to prevent re-entrancy.</span>

  <span class="token keyword">var</span> isPerformingWork <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> isHostCallbackScheduled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> isHostTimeoutScheduled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">advanceTimers</span><span class="token punctuation">(</span><span class="token parameter">currentTime</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Check for tasks that are no longer delayed and add them to the queue.</span>
    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">peek</span><span class="token punctuation">(</span>timerQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>timer <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">.</span>callback <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Timer was cancelled.</span>
        <span class="token function">pop</span><span class="token punctuation">(</span>timerQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">.</span>startTime <span class="token operator">&lt;=</span> currentTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Timer fired. Transfer to the task queue.</span>
        <span class="token function">pop</span><span class="token punctuation">(</span>timerQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        timer<span class="token punctuation">.</span>sortIndex <span class="token operator">=</span> timer<span class="token punctuation">.</span>expirationTime<span class="token punctuation">;</span>
        <span class="token function">push</span><span class="token punctuation">(</span>taskQueue<span class="token punctuation">,</span> timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// Remaining timers are pending.</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      timer <span class="token operator">=</span> <span class="token function">peek</span><span class="token punctuation">(</span>timerQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleTimeout</span><span class="token punctuation">(</span><span class="token parameter">currentTime</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    isHostTimeoutScheduled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token function">advanceTimers</span><span class="token punctuation">(</span>currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isHostCallbackScheduled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">peek</span><span class="token punctuation">(</span>taskQueue<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        isHostCallbackScheduled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token function">requestHostCallback</span><span class="token punctuation">(</span>flushWork<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> firstTimer <span class="token operator">=</span> <span class="token function">peek</span><span class="token punctuation">(</span>timerQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>firstTimer <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">requestHostTimeout</span><span class="token punctuation">(</span>handleTimeout<span class="token punctuation">,</span> firstTimer<span class="token punctuation">.</span>startTime <span class="token operator">-</span> currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">flushWork</span><span class="token punctuation">(</span><span class="token parameter">hasTimeRemaining<span class="token punctuation">,</span> initialTime</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    isHostCallbackScheduled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>isHostTimeoutScheduled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// We scheduled a timeout but it&apos;s no longer needed. Cancel it.</span>
      isHostTimeoutScheduled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token function">cancelHostTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    isPerformingWork <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> previousPriorityLevel <span class="token operator">=</span> currentPriorityLevel<span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>enableProfiling<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">workLoop</span><span class="token punctuation">(</span>hasTimeRemaining<span class="token punctuation">,</span> initialTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>currentTask <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> currentTime <span class="token operator">=</span> <span class="token function">getCurrentTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">markTaskErrored</span><span class="token punctuation">(</span>currentTask<span class="token punctuation">,</span> currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
            currentTask<span class="token punctuation">.</span>isQueued <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// No catch in prod code path.</span>
        <span class="token keyword">return</span> <span class="token function">workLoop</span><span class="token punctuation">(</span>hasTimeRemaining<span class="token punctuation">,</span> initialTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      currentTask <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      currentPriorityLevel <span class="token operator">=</span> previousPriorityLevel<span class="token punctuation">;</span>
      isPerformingWork <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">workLoop</span><span class="token punctuation">(</span><span class="token parameter">hasTimeRemaining<span class="token punctuation">,</span> initialTime</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> currentTime <span class="token operator">=</span> initialTime<span class="token punctuation">;</span>
    <span class="token function">advanceTimers</span><span class="token punctuation">(</span>currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    currentTask <span class="token operator">=</span> <span class="token function">peek</span><span class="token punctuation">(</span>taskQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>currentTask <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>enableSchedulerDebugging<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        currentTask<span class="token punctuation">.</span>expirationTime <span class="token operator">&gt;</span> currentTime <span class="token operator">&amp;&amp;</span>
        <span class="token punctuation">(</span><span class="token operator">!</span>hasTimeRemaining <span class="token operator">||</span> <span class="token function">shouldYieldToHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// This currentTask hasn&apos;t expired, and we&apos;ve reached the deadline.</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">var</span> callback <span class="token operator">=</span> currentTask<span class="token punctuation">.</span>callback<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        currentTask<span class="token punctuation">.</span>callback <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        currentPriorityLevel <span class="token operator">=</span> currentTask<span class="token punctuation">.</span>priorityLevel<span class="token punctuation">;</span>
        <span class="token keyword">var</span> didUserCallbackTimeout <span class="token operator">=</span> currentTask<span class="token punctuation">.</span>expirationTime <span class="token operator">&lt;=</span> currentTime<span class="token punctuation">;</span>

        <span class="token keyword">var</span> continuationCallback <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span>didUserCallbackTimeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
        currentTime <span class="token operator">=</span> <span class="token function">getCurrentTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> continuationCallback <span class="token operator">===</span> <span class="token string">&apos;function&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          currentTask<span class="token punctuation">.</span>callback <span class="token operator">=</span> continuationCallback<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>currentTask <span class="token operator">===</span> <span class="token function">peek</span><span class="token punctuation">(</span>taskQueue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">pop</span><span class="token punctuation">(</span>taskQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token function">advanceTimers</span><span class="token punctuation">(</span>currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">pop</span><span class="token punctuation">(</span>taskQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      currentTask <span class="token operator">=</span> <span class="token function">peek</span><span class="token punctuation">(</span>taskQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">// Return whether there&apos;s additional work</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentTask <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> firstTimer <span class="token operator">=</span> <span class="token function">peek</span><span class="token punctuation">(</span>timerQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>firstTimer <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">requestHostTimeout</span><span class="token punctuation">(</span>handleTimeout<span class="token punctuation">,</span> firstTimer<span class="token punctuation">.</span>startTime <span class="token operator">-</span> currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">unstable_runWithPriority</span><span class="token punctuation">(</span><span class="token parameter">priorityLevel<span class="token punctuation">,</span> eventHandler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>priorityLevel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> ImmediatePriority<span class="token operator">:</span>
      <span class="token keyword">case</span> UserBlockingPriority<span class="token operator">:</span>
      <span class="token keyword">case</span> NormalPriority<span class="token operator">:</span>
      <span class="token keyword">case</span> LowPriority<span class="token operator">:</span>
      <span class="token keyword">case</span> IdlePriority<span class="token operator">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>

      <span class="token keyword">default</span><span class="token operator">:</span>
        priorityLevel <span class="token operator">=</span> NormalPriority<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> previousPriorityLevel <span class="token operator">=</span> currentPriorityLevel<span class="token punctuation">;</span>
    currentPriorityLevel <span class="token operator">=</span> priorityLevel<span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">eventHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      currentPriorityLevel <span class="token operator">=</span> previousPriorityLevel<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">unstable_next</span><span class="token punctuation">(</span><span class="token parameter">eventHandler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> priorityLevel<span class="token punctuation">;</span>

    <span class="token keyword">switch</span> <span class="token punctuation">(</span>currentPriorityLevel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> ImmediatePriority<span class="token operator">:</span>
      <span class="token keyword">case</span> UserBlockingPriority<span class="token operator">:</span>
      <span class="token keyword">case</span> NormalPriority<span class="token operator">:</span>
        <span class="token comment">// Shift down to normal priority</span>
        priorityLevel <span class="token operator">=</span> NormalPriority<span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>

      <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token comment">// Anything lower than normal priority should remain at the current level.</span>
        priorityLevel <span class="token operator">=</span> currentPriorityLevel<span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> previousPriorityLevel <span class="token operator">=</span> currentPriorityLevel<span class="token punctuation">;</span>
    currentPriorityLevel <span class="token operator">=</span> priorityLevel<span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">eventHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      currentPriorityLevel <span class="token operator">=</span> previousPriorityLevel<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">unstable_wrapCallback</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> parentPriorityLevel <span class="token operator">=</span> currentPriorityLevel<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// This is a fork of runWithPriority, inlined for performance.</span>
      <span class="token keyword">var</span> previousPriorityLevel <span class="token operator">=</span> currentPriorityLevel<span class="token punctuation">;</span>
      currentPriorityLevel <span class="token operator">=</span> parentPriorityLevel<span class="token punctuation">;</span>

      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        currentPriorityLevel <span class="token operator">=</span> previousPriorityLevel<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">unstable_scheduleCallback</span><span class="token punctuation">(</span><span class="token parameter">priorityLevel<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> currentTime <span class="token operator">=</span> <span class="token function">getCurrentTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> startTime<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> options <span class="token operator">===</span> <span class="token string">&apos;object&apos;</span> <span class="token operator">&amp;&amp;</span> options <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> delay <span class="token operator">=</span> options<span class="token punctuation">.</span>delay<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> delay <span class="token operator">===</span> <span class="token string">&apos;number&apos;</span> <span class="token operator">&amp;&amp;</span> delay <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        startTime <span class="token operator">=</span> currentTime <span class="token operator">+</span> delay<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        startTime <span class="token operator">=</span> currentTime<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      startTime <span class="token operator">=</span> currentTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> timeout<span class="token punctuation">;</span>

    <span class="token keyword">switch</span> <span class="token punctuation">(</span>priorityLevel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> ImmediatePriority<span class="token operator">:</span>
        timeout <span class="token operator">=</span> <span class="token constant">IMMEDIATE_PRIORITY_TIMEOUT</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>

      <span class="token keyword">case</span> UserBlockingPriority<span class="token operator">:</span>
        timeout <span class="token operator">=</span> <span class="token constant">USER_BLOCKING_PRIORITY_TIMEOUT</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>

      <span class="token keyword">case</span> IdlePriority<span class="token operator">:</span>
        timeout <span class="token operator">=</span> <span class="token constant">IDLE_PRIORITY_TIMEOUT</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>

      <span class="token keyword">case</span> LowPriority<span class="token operator">:</span>
        timeout <span class="token operator">=</span> <span class="token constant">LOW_PRIORITY_TIMEOUT</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>

      <span class="token keyword">case</span> NormalPriority<span class="token operator">:</span>
      <span class="token keyword">default</span><span class="token operator">:</span>
        timeout <span class="token operator">=</span> <span class="token constant">NORMAL_PRIORITY_TIMEOUT</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> expirationTime <span class="token operator">=</span> startTime <span class="token operator">+</span> timeout<span class="token punctuation">;</span>
    <span class="token keyword">var</span> newTask <span class="token operator">=</span> <span class="token punctuation">{</span>
      id<span class="token operator">:</span> taskIdCounter<span class="token operator">++</span><span class="token punctuation">,</span>
      callback<span class="token operator">:</span> callback<span class="token punctuation">,</span>
      priorityLevel<span class="token operator">:</span> priorityLevel<span class="token punctuation">,</span>
      startTime<span class="token operator">:</span> startTime<span class="token punctuation">,</span>
      expirationTime<span class="token operator">:</span> expirationTime<span class="token punctuation">,</span>
      sortIndex<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>startTime <span class="token operator">&gt;</span> currentTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// This is a delayed task.</span>
      newTask<span class="token punctuation">.</span>sortIndex <span class="token operator">=</span> startTime<span class="token punctuation">;</span>
      <span class="token function">push</span><span class="token punctuation">(</span>timerQueue<span class="token punctuation">,</span> newTask<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">peek</span><span class="token punctuation">(</span>taskQueue<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> newTask <span class="token operator">===</span> <span class="token function">peek</span><span class="token punctuation">(</span>timerQueue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// All tasks are delayed, and this is the task with the earliest delay.</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>isHostTimeoutScheduled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// Cancel an existing timeout.</span>
          <span class="token function">cancelHostTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          isHostTimeoutScheduled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token comment">// Schedule a timeout.</span>

        <span class="token function">requestHostTimeout</span><span class="token punctuation">(</span>handleTimeout<span class="token punctuation">,</span> startTime <span class="token operator">-</span> currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      newTask<span class="token punctuation">.</span>sortIndex <span class="token operator">=</span> expirationTime<span class="token punctuation">;</span>
      <span class="token function">push</span><span class="token punctuation">(</span>taskQueue<span class="token punctuation">,</span> newTask<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// wait until the next time we yield.</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isHostCallbackScheduled <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isPerformingWork<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        isHostCallbackScheduled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token function">requestHostCallback</span><span class="token punctuation">(</span>flushWork<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> newTask<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">unstable_pauseExecution</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">unstable_continueExecution</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isHostCallbackScheduled <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isPerformingWork<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      isHostCallbackScheduled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token function">requestHostCallback</span><span class="token punctuation">(</span>flushWork<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">unstable_getFirstCallbackNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">peek</span><span class="token punctuation">(</span>taskQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">unstable_cancelCallback</span><span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// remove from the queue because you can&apos;t remove arbitrary nodes from an</span>
    <span class="token comment">// array based heap, only the first one.)</span>

    task<span class="token punctuation">.</span>callback <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">unstable_getCurrentPriorityLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> currentPriorityLevel<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> unstable_requestPaint <span class="token operator">=</span> requestPaint<span class="token punctuation">;</span>
  <span class="token keyword">var</span> unstable_Profiling <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> Scheduler <span class="token operator">=</span> <span class="token comment">/*#__PURE__*/</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    __proto__<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    unstable_ImmediatePriority<span class="token operator">:</span> ImmediatePriority<span class="token punctuation">,</span>
    unstable_UserBlockingPriority<span class="token operator">:</span> UserBlockingPriority<span class="token punctuation">,</span>
    unstable_NormalPriority<span class="token operator">:</span> NormalPriority<span class="token punctuation">,</span>
    unstable_IdlePriority<span class="token operator">:</span> IdlePriority<span class="token punctuation">,</span>
    unstable_LowPriority<span class="token operator">:</span> LowPriority<span class="token punctuation">,</span>
    unstable_runWithPriority<span class="token operator">:</span> unstable_runWithPriority<span class="token punctuation">,</span>
    unstable_next<span class="token operator">:</span> unstable_next<span class="token punctuation">,</span>
    unstable_scheduleCallback<span class="token operator">:</span> unstable_scheduleCallback<span class="token punctuation">,</span>
    unstable_cancelCallback<span class="token operator">:</span> unstable_cancelCallback<span class="token punctuation">,</span>
    unstable_wrapCallback<span class="token operator">:</span> unstable_wrapCallback<span class="token punctuation">,</span>
    unstable_getCurrentPriorityLevel<span class="token operator">:</span> unstable_getCurrentPriorityLevel<span class="token punctuation">,</span>
    <span class="token keyword">get</span> <span class="token function">unstable_shouldYield</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> shouldYieldToHost<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    unstable_requestPaint<span class="token operator">:</span> unstable_requestPaint<span class="token punctuation">,</span>
    unstable_continueExecution<span class="token operator">:</span> unstable_continueExecution<span class="token punctuation">,</span>
    unstable_pauseExecution<span class="token operator">:</span> unstable_pauseExecution<span class="token punctuation">,</span>
    unstable_getFirstCallbackNode<span class="token operator">:</span> unstable_getFirstCallbackNode<span class="token punctuation">,</span>
    <span class="token keyword">get</span> <span class="token function">unstable_now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> getCurrentTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">get</span> <span class="token function">unstable_forceFrameRate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> forceFrameRate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    unstable_Profiling<span class="token operator">:</span> unstable_Profiling<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> <span class="token constant">DEFAULT_THREAD_ID</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// Counters used to generate unique IDs.</span>

  <span class="token keyword">var</span> interactionIDCounter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> threadIDCounter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// Set of currently traced interactions.</span>
  <span class="token comment">// Interactions &quot;stack&quot;&#x2013;</span>
  <span class="token comment">// Meaning that newly traced interactions are appended to the previously active set.</span>
  <span class="token comment">// When an interaction goes out of scope, the previous set (if any) is restored.</span>

  <span class="token keyword">var</span> interactionsRef <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// Listener(s) to notify when interactions begin and end.</span>

  <span class="token keyword">var</span> subscriberRef <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token punctuation">{</span>
    interactionsRef <span class="token operator">=</span> <span class="token punctuation">{</span>
      current<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    subscriberRef <span class="token operator">=</span> <span class="token punctuation">{</span>
      current<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">unstable_clear</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> prevInteractions <span class="token operator">=</span> interactionsRef<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
    interactionsRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      interactionsRef<span class="token punctuation">.</span>current <span class="token operator">=</span> prevInteractions<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">unstable_getCurrent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">return</span> interactionsRef<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">unstable_getThreadID</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">++</span>threadIDCounter<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">unstable_trace</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> timestamp<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> threadID <span class="token operator">=</span>
      arguments<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> arguments<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span>
        <span class="token operator">?</span> arguments<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>
        <span class="token operator">:</span> <span class="token constant">DEFAULT_THREAD_ID</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> interaction <span class="token operator">=</span> <span class="token punctuation">{</span>
      __count<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      id<span class="token operator">:</span> interactionIDCounter<span class="token operator">++</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> name<span class="token punctuation">,</span>
      timestamp<span class="token operator">:</span> timestamp<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> prevInteractions <span class="token operator">=</span> interactionsRef<span class="token punctuation">.</span>current<span class="token punctuation">;</span> <span class="token comment">// Traced interactions should stack/accumulate.</span>
    <span class="token comment">// To do that, clone the current interactions.</span>
    <span class="token comment">// The previous set will be restored upon completion.</span>

    <span class="token keyword">var</span> interactions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>prevInteractions<span class="token punctuation">)</span><span class="token punctuation">;</span>
    interactions<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>interaction<span class="token punctuation">)</span><span class="token punctuation">;</span>
    interactionsRef<span class="token punctuation">.</span>current <span class="token operator">=</span> interactions<span class="token punctuation">;</span>
    <span class="token keyword">var</span> subscriber <span class="token operator">=</span> subscriberRef<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
    <span class="token keyword">var</span> returnValue<span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>subscriber <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        subscriber<span class="token punctuation">.</span><span class="token function">onInteractionTraced</span><span class="token punctuation">(</span>interaction<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>subscriber <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          subscriber<span class="token punctuation">.</span><span class="token function">onWorkStarted</span><span class="token punctuation">(</span>interactions<span class="token punctuation">,</span> threadID<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          returnValue <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
          interactionsRef<span class="token punctuation">.</span>current <span class="token operator">=</span> prevInteractions<span class="token punctuation">;</span>

          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>subscriber <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              subscriber<span class="token punctuation">.</span><span class="token function">onWorkStopped</span><span class="token punctuation">(</span>interactions<span class="token punctuation">,</span> threadID<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            interaction<span class="token punctuation">.</span>__count<span class="token operator">--</span><span class="token punctuation">;</span> <span class="token comment">// If no async work was scheduled for this interaction,</span>
            <span class="token comment">// Notify subscribers that it&apos;s completed.</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>subscriber <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> interaction<span class="token punctuation">.</span>__count <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              subscriber<span class="token punctuation">.</span><span class="token function">onInteractionScheduledWorkCompleted</span><span class="token punctuation">(</span>interaction<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> returnValue<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">unstable_wrap</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> threadID <span class="token operator">=</span>
      arguments<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span>
        <span class="token operator">?</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token operator">:</span> <span class="token constant">DEFAULT_THREAD_ID</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> wrappedInteractions <span class="token operator">=</span> interactionsRef<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
    <span class="token keyword">var</span> subscriber <span class="token operator">=</span> subscriberRef<span class="token punctuation">.</span>current<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>subscriber <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      subscriber<span class="token punctuation">.</span><span class="token function">onWorkScheduled</span><span class="token punctuation">(</span>wrappedInteractions<span class="token punctuation">,</span> threadID<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">// Update the pending async work count for the current interactions.</span>
    <span class="token comment">// Update after calling subscribers in case of error.</span>

    wrappedInteractions<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">interaction</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      interaction<span class="token punctuation">.</span>__count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> hasRun <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">wrapped</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> prevInteractions <span class="token operator">=</span> interactionsRef<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
      interactionsRef<span class="token punctuation">.</span>current <span class="token operator">=</span> wrappedInteractions<span class="token punctuation">;</span>
      subscriber <span class="token operator">=</span> subscriberRef<span class="token punctuation">.</span>current<span class="token punctuation">;</span>

      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> returnValue<span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>subscriber <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            subscriber<span class="token punctuation">.</span><span class="token function">onWorkStarted</span><span class="token punctuation">(</span>wrappedInteractions<span class="token punctuation">,</span> threadID<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            returnValue <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            interactionsRef<span class="token punctuation">.</span>current <span class="token operator">=</span> prevInteractions<span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>subscriber <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              subscriber<span class="token punctuation">.</span><span class="token function">onWorkStopped</span><span class="token punctuation">(</span>wrappedInteractions<span class="token punctuation">,</span> threadID<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> returnValue<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hasRun<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// We only expect a wrapped function to be executed once,</span>
          <span class="token comment">// But in the event that it&apos;s executed more than once&#x2013;</span>
          <span class="token comment">// Only decrement the outstanding interaction counts once.</span>
          hasRun <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// Update pending async counts for all wrapped interactions.</span>
          <span class="token comment">// If this was the last scheduled async work for any of them,</span>
          <span class="token comment">// Mark them as completed.</span>

          wrappedInteractions<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">interaction</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            interaction<span class="token punctuation">.</span>__count<span class="token operator">--</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>subscriber <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> interaction<span class="token punctuation">.</span>__count <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              subscriber<span class="token punctuation">.</span><span class="token function">onInteractionScheduledWorkCompleted</span><span class="token punctuation">(</span>interaction<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    wrapped<span class="token punctuation">.</span><span class="token function-variable function">cancel</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      subscriber <span class="token operator">=</span> subscriberRef<span class="token punctuation">.</span>current<span class="token punctuation">;</span>

      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>subscriber <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          subscriber<span class="token punctuation">.</span><span class="token function">onWorkCanceled</span><span class="token punctuation">(</span>wrappedInteractions<span class="token punctuation">,</span> threadID<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token comment">// Update pending async counts for all wrapped interactions.</span>
        <span class="token comment">// If this was the last scheduled async work for any of them,</span>
        <span class="token comment">// Mark them as completed.</span>
        wrappedInteractions<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">interaction</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          interaction<span class="token punctuation">.</span>__count<span class="token operator">--</span><span class="token punctuation">;</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span>subscriber <span class="token operator">&amp;&amp;</span> interaction<span class="token punctuation">.</span>__count <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            subscriber<span class="token punctuation">.</span><span class="token function">onInteractionScheduledWorkCompleted</span><span class="token punctuation">(</span>interaction<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> wrapped<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> subscribers <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token punctuation">{</span>
    subscribers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">unstable_subscribe</span><span class="token punctuation">(</span><span class="token parameter">subscriber</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      subscribers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>subscriber<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>subscribers<span class="token punctuation">.</span>size <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        subscriberRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token punctuation">{</span>
          onInteractionScheduledWorkCompleted<span class="token operator">:</span>
            onInteractionScheduledWorkCompleted<span class="token punctuation">,</span>
          onInteractionTraced<span class="token operator">:</span> onInteractionTraced<span class="token punctuation">,</span>
          onWorkCanceled<span class="token operator">:</span> onWorkCanceled<span class="token punctuation">,</span>
          onWorkScheduled<span class="token operator">:</span> onWorkScheduled<span class="token punctuation">,</span>
          onWorkStarted<span class="token operator">:</span> onWorkStarted<span class="token punctuation">,</span>
          onWorkStopped<span class="token operator">:</span> onWorkStopped<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">unstable_unsubscribe</span><span class="token punctuation">(</span><span class="token parameter">subscriber</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      subscribers<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>subscriber<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>subscribers<span class="token punctuation">.</span>size <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        subscriberRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">onInteractionTraced</span><span class="token punctuation">(</span><span class="token parameter">interaction</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> didCatchError <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> caughtError <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    subscribers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">subscriber</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        subscriber<span class="token punctuation">.</span><span class="token function">onInteractionTraced</span><span class="token punctuation">(</span>interaction<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>didCatchError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          didCatchError <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          caughtError <span class="token operator">=</span> error<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>didCatchError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> caughtError<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">onInteractionScheduledWorkCompleted</span><span class="token punctuation">(</span><span class="token parameter">interaction</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> didCatchError <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> caughtError <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    subscribers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">subscriber</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        subscriber<span class="token punctuation">.</span><span class="token function">onInteractionScheduledWorkCompleted</span><span class="token punctuation">(</span>interaction<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>didCatchError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          didCatchError <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          caughtError <span class="token operator">=</span> error<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>didCatchError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> caughtError<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">onWorkScheduled</span><span class="token punctuation">(</span><span class="token parameter">interactions<span class="token punctuation">,</span> threadID</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> didCatchError <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> caughtError <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    subscribers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">subscriber</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        subscriber<span class="token punctuation">.</span><span class="token function">onWorkScheduled</span><span class="token punctuation">(</span>interactions<span class="token punctuation">,</span> threadID<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>didCatchError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          didCatchError <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          caughtError <span class="token operator">=</span> error<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>didCatchError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> caughtError<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">onWorkStarted</span><span class="token punctuation">(</span><span class="token parameter">interactions<span class="token punctuation">,</span> threadID</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> didCatchError <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> caughtError <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    subscribers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">subscriber</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        subscriber<span class="token punctuation">.</span><span class="token function">onWorkStarted</span><span class="token punctuation">(</span>interactions<span class="token punctuation">,</span> threadID<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>didCatchError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          didCatchError <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          caughtError <span class="token operator">=</span> error<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>didCatchError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> caughtError<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">onWorkStopped</span><span class="token punctuation">(</span><span class="token parameter">interactions<span class="token punctuation">,</span> threadID</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> didCatchError <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> caughtError <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    subscribers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">subscriber</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        subscriber<span class="token punctuation">.</span><span class="token function">onWorkStopped</span><span class="token punctuation">(</span>interactions<span class="token punctuation">,</span> threadID<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>didCatchError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          didCatchError <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          caughtError <span class="token operator">=</span> error<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>didCatchError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> caughtError<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">onWorkCanceled</span><span class="token punctuation">(</span><span class="token parameter">interactions<span class="token punctuation">,</span> threadID</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> didCatchError <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> caughtError <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    subscribers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">subscriber</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        subscriber<span class="token punctuation">.</span><span class="token function">onWorkCanceled</span><span class="token punctuation">(</span>interactions<span class="token punctuation">,</span> threadID<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>didCatchError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          didCatchError <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          caughtError <span class="token operator">=</span> error<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>didCatchError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> caughtError<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> SchedulerTracing <span class="token operator">=</span> <span class="token comment">/*#__PURE__*/</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    __proto__<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token keyword">get</span> <span class="token function">__interactionsRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> interactionsRef<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">get</span> <span class="token function">__subscriberRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> subscriberRef<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    unstable_clear<span class="token operator">:</span> unstable_clear<span class="token punctuation">,</span>
    unstable_getCurrent<span class="token operator">:</span> unstable_getCurrent<span class="token punctuation">,</span>
    unstable_getThreadID<span class="token operator">:</span> unstable_getThreadID<span class="token punctuation">,</span>
    unstable_trace<span class="token operator">:</span> unstable_trace<span class="token punctuation">,</span>
    unstable_wrap<span class="token operator">:</span> unstable_wrap<span class="token punctuation">,</span>
    unstable_subscribe<span class="token operator">:</span> unstable_subscribe<span class="token punctuation">,</span>
    unstable_unsubscribe<span class="token operator">:</span> unstable_unsubscribe<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> ReactSharedInternals$<span class="token number">1</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    ReactCurrentDispatcher<span class="token operator">:</span> ReactCurrentDispatcher<span class="token punctuation">,</span>
    ReactCurrentOwner<span class="token operator">:</span> ReactCurrentOwner<span class="token punctuation">,</span>
    IsSomeRendererActing<span class="token operator">:</span> IsSomeRendererActing<span class="token punctuation">,</span>
    ReactCurrentBatchConfig<span class="token operator">:</span> ReactCurrentBatchConfig<span class="token punctuation">,</span>
    <span class="token comment">// Used by renderers to avoid bundling object-assign twice in UMD bundles:</span>
    assign<span class="token operator">:</span> assign<span class="token punctuation">,</span>
    <span class="token comment">// Re-export the schedule API(s) for UMD bundles.</span>
    <span class="token comment">// This avoids introducing a dependency on a new UMD global in a minor update,</span>
    <span class="token comment">// Since that would be a breaking change (e.g. for all existing CodeSandboxes).</span>
    <span class="token comment">// This re-export is only required for UMD bundles;</span>
    <span class="token comment">// CJS bundles use the shared NPM package.</span>
    Scheduler<span class="token operator">:</span> Scheduler<span class="token punctuation">,</span>
    SchedulerTracing<span class="token operator">:</span> SchedulerTracing<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token punctuation">{</span>
    ReactSharedInternals$<span class="token number">1.</span>ReactDebugCurrentFrame <span class="token operator">=</span> ReactDebugCurrentFrame<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> frozenObject <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">/* eslint-disable no-new */</span>

      <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span>frozenObject<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span>frozenObject<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">/* eslint-enable no-new */</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> createElement$<span class="token number">1</span> <span class="token operator">=</span> createElementWithValidation<span class="token punctuation">;</span>
  <span class="token keyword">var</span> cloneElement$<span class="token number">1</span> <span class="token operator">=</span> cloneElementWithValidation<span class="token punctuation">;</span>
  <span class="token keyword">var</span> createFactory <span class="token operator">=</span> createFactoryWithValidation<span class="token punctuation">;</span>
  <span class="token keyword">var</span> Children <span class="token operator">=</span> <span class="token punctuation">{</span>
    map<span class="token operator">:</span> mapChildren<span class="token punctuation">,</span>
    forEach<span class="token operator">:</span> forEachChildren<span class="token punctuation">,</span>
    count<span class="token operator">:</span> countChildren<span class="token punctuation">,</span>
    toArray<span class="token operator">:</span> toArray<span class="token punctuation">,</span>
    only<span class="token operator">:</span> onlyChild<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  exports<span class="token punctuation">.</span>Children <span class="token operator">=</span> Children<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>Component <span class="token operator">=</span> Component<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>PureComponent <span class="token operator">=</span> PureComponent<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED <span class="token operator">=</span>
    ReactSharedInternals$<span class="token number">1</span><span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>cloneElement <span class="token operator">=</span> cloneElement$<span class="token number">1</span><span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>createContext <span class="token operator">=</span> createContext<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>createElement <span class="token operator">=</span> createElement$<span class="token number">1</span><span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>createFactory <span class="token operator">=</span> createFactory<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>createRef <span class="token operator">=</span> createRef<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>forwardRef <span class="token operator">=</span> forwardRef<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>isValidElement <span class="token operator">=</span> isValidElement<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>lazy <span class="token operator">=</span> lazy<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>memo <span class="token operator">=</span> memo<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>useCallback <span class="token operator">=</span> useCallback<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>useContext <span class="token operator">=</span> useContext<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>useDebugValue <span class="token operator">=</span> useDebugValue<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>useEffect <span class="token operator">=</span> useEffect<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>useImperativeHandle <span class="token operator">=</span> useImperativeHandle<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>useLayoutEffect <span class="token operator">=</span> useLayoutEffect<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>useMemo <span class="token operator">=</span> useMemo<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>useReducer <span class="token operator">=</span> useReducer<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>useRef <span class="token operator">=</span> useRef<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>useState <span class="token operator">=</span> useState<span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>version <span class="token operator">=</span> ReactVersion<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<footer class="footer"><div class="footer__container--normal"><div class="footer__description--normal"><p class="paragraph footer__author--normal" style="color: #000 !important;">&#x524D;&#x7AEF;&#x7B14;&#x8BB0;<sup class="super">&#xAE;</sup></p><p class="paragraph footer__quote--normal" style="color: #000 !important;">&#x81F4;&#x6240;&#x6709;&#x60F3;&#x8981;&#x8FDB;&#x5165;&#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x884C;&#x4E1A;&#x7684;&#x65B0;&#x4EBA;&#x4EEC;  -- marion.lau</p><div class="footer__main--normal"><p class="paragraph footer__main__paragraph--normal copyright" style="color: #666 !important;">Copyright &#xA9; marion.lau@foxmail.com all right reserved</p><p class="paragraph footer__main__paragraph--normal footer__modifyTime--normal" style="color: #666 !important;"><span style="color: #666 !important;">modified at</span>
2021-12-16 09:40:49
</p></div></div></div><div id="gitalk-container" class="box__issues"></div><link rel="stylesheet" href="../assets/gitalk.min.css"><script src="../assets/gitalk.min.js"></script><script>var gitalk = new Gitalk({clientID: "1dd340a7923ebd556673",clientSecret: "4981d6b240efb08d88e19b395d3b7ea12300e0ec",repo: "blog.fenotes.com",owner: "uncle-marion",admin: ["uncle-marion"],id: location.pathname});gitalk.render("gitalk-container");</script></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="cross-domin.md" class="navigation navigation-prev navigation-unique" aria-label="Previous page: 跨域">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"React 原码","level":"1.14.4","depth":2,"previous":{"title":"跨域","level":"1.14.3","depth":2,"path":"enclusore/cross-domin.md","ref":"enclusore/cross-domin.md","articles":[]},"dir":"ltr"},"config":{"plugins":["expandable-chapters","prism","-highlight","page-copyright","custom-favicon","katex"],"styles":{"website":"./assets/style.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-tomorrow.css"]},"search":{},"page-copyright":{"wisdom":"致所有想要进入前端开发行业的新人们  -- marion.lau","noPowered":true,"clientID":"1dd340a7923ebd556673","copyright":"Copyright &#169; marion.lau@foxmail.com","styles (normal, symmetrical)":"normal","style":"normal","isShowQRCode":false,"timeColor":"#666","utcOffset":"8","format":"YYYY-MM-dd hh:mm:ss","signature":"前端笔记","baseUri":"http://www.fenotes.com","clientSecret":"4981d6b240efb08d88e19b395d3b7ea12300e0ec","copyrightColor":"#666","description":"modified at"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"favicon":"./assets/m.png","custom-favicon":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"theme":"default","author":"marion.lau@foxmail.com","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"React Training","gitbook":"*","description":"前端开发人员应知应会，如果你想要入职前端这个行业，建议你将本书中的内容都过一遍，已经了解的知识就当是复习了，不了解的知识，特别是项目这块的，作为一个好的前端，应该都要知道要养成习惯。","theme-default":{"showLevel":true}},"file":{"path":"enclusore/react-source.md","mtime":"2021-12-16T01:40:49.807Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-08-26T09:22:02.117Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

